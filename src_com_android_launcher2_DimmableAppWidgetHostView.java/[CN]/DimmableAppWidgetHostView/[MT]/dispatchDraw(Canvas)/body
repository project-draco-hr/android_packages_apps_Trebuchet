{
  if (isDimmedViewUpdatePass) {
    final float alpha=getAlpha();
    canvas.save();
    setAlpha(1.0f);
    super.dispatchDraw(canvas);
    canvas.restore();
    setAlpha(alpha);
  }
 else {
    if (mDimmedView != null && mDimmableProgress > 0) {
      mPaint.setAlpha((int)(mDimmableProgress * 255));
      canvas.drawBitmap(mDimmedView,0,0,mPaint);
    }
    updateChildAlpha();
    super.dispatchDraw(canvas);
  }
}

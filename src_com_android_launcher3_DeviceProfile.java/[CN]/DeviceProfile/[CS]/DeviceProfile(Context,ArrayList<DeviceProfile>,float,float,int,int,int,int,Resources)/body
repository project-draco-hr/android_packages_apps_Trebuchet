{
  DisplayMetrics dm=res.getDisplayMetrics();
  ArrayList<DeviceProfileQuery> points=new ArrayList<DeviceProfileQuery>();
  transposeLayoutWithOrientation=res.getBoolean(R.bool.hotseat_transpose_layout_with_orientation);
  minWidthDps=minWidth;
  minHeightDps=minHeight;
  ComponentName cn=new ComponentName(context.getPackageName(),this.getClass().getName());
  defaultWidgetPadding=AppWidgetHostView.getDefaultPaddingForWidget(context,cn,null);
  edgeMarginPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_edge_margin);
  desiredWorkspaceLeftRightMarginPx=2 * edgeMarginPx;
  pageIndicatorHeightPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_page_indicator_height);
  defaultPageSpacingPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_workspace_page_spacing);
  allAppsCellPaddingPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_all_apps_cell_padding);
  overviewModeMinIconZoneHeightPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_overview_min_icon_zone_height);
  overviewModeMaxIconZoneHeightPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_overview_max_icon_zone_height);
  overviewModeMaxBarWidthPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_overview_bar_max_width);
  overviewModeIconZoneRatio=res.getInteger(R.integer.config_dynamic_grid_overview_icon_zone_percentage) / 100f;
  overviewModeScaleFactor=res.getInteger(R.integer.config_dynamic_grid_overview_scale_percentage) / 100f;
  for (  DeviceProfile p : profiles) {
    points.add(new DeviceProfileQuery(p.minWidthDps,p.minHeightDps,p.numRows));
  }
  numRows=Math.round(invDistWeightedInterpolate(minWidth,minHeight,points));
  points.clear();
  for (  DeviceProfile p : profiles) {
    points.add(new DeviceProfileQuery(p.minWidthDps,p.minHeightDps,p.numColumns));
  }
  numColumns=Math.round(invDistWeightedInterpolate(minWidth,minHeight,points));
  points.clear();
  for (  DeviceProfile p : profiles) {
    points.add(new DeviceProfileQuery(p.minWidthDps,p.minHeightDps,p.numHotseatIcons));
  }
  numHotseatIcons=Math.round(invDistWeightedInterpolate(minWidth,minHeight,points));
  hotseatAllAppsRank=(int)(numHotseatIcons / 2);
  points.clear();
  for (  DeviceProfile p : profiles) {
    points.add(new DeviceProfileQuery(p.minWidthDps,p.minHeightDps,p.iconSize));
  }
  iconSize=invDistWeightedInterpolate(minWidth,minHeight,points);
  allAppsIconSizePx=DynamicGrid.pxFromDp(iconSize,dm);
  points.clear();
  for (  DeviceProfile p : profiles) {
    points.add(new DeviceProfileQuery(p.minWidthDps,p.minHeightDps,p.iconTextSize));
  }
  iconTextSize=invDistWeightedInterpolate(minWidth,minHeight,points);
  iconDrawablePaddingOriginalPx=res.getDimensionPixelSize(R.dimen.dynamic_grid_icon_drawable_padding);
  allAppsIconTextSizePx=DynamicGrid.pxFromDp(iconTextSize,dm);
  points.clear();
  for (  DeviceProfile p : profiles) {
    points.add(new DeviceProfileQuery(p.minWidthDps,p.minHeightDps,p.hotseatIconSize));
  }
  hotseatIconSize=invDistWeightedInterpolate(minWidth,minHeight,points);
  updateFromConfiguration(context,res,wPx,hPx,awPx,ahPx);
  updateAvailableDimensions(context);
}

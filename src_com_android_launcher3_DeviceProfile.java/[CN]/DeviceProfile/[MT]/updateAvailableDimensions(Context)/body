{
  WindowManager windowManager=(WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
  Display display=windowManager.getDefaultDisplay();
  Resources resources=context.getResources();
  DisplayMetrics dm=resources.getDisplayMetrics();
  Configuration config=resources.getConfiguration();
  Point size=new Point();
  Point smallestSize=new Point();
  Point largestSize=new Point();
  display.getSize(size);
  display.getCurrentSizeRange(smallestSize,largestSize);
  availableWidthPx=size.x;
  if (config.orientation == Configuration.ORIENTATION_LANDSCAPE) {
    availableHeightPx=smallestSize.y;
  }
 else {
    availableHeightPx=largestSize.y;
  }
  Rect workspacePadding=getWorkspacePadding();
  float scale=1f;
  int drawablePadding=iconDrawablePaddingOriginalPx;
  updateIconSize(1f,drawablePadding,resources,dm);
  float usedHeight=(cellHeightPx * numRows);
  int maxHeight=(availableHeightPx - workspacePadding.top - workspacePadding.bottom);
  if (usedHeight > maxHeight) {
    scale=maxHeight / usedHeight;
    drawablePadding=0;
  }
  updateIconSize(scale,drawablePadding,resources,dm);
  for (  DeviceProfileCallbacks cb : mCallbacks) {
    cb.onAvailableSizeChanged(this);
  }
}

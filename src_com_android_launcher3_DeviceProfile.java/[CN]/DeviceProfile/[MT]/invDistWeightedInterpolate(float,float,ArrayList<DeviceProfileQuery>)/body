{
  float sum=0;
  float weights=0;
  float pow=5;
  float kNearestNeighbors=3;
  final PointF xy=new PointF(width,height);
  ArrayList<DeviceProfileQuery> pointsByNearness=points;
  Collections.sort(pointsByNearness,new Comparator<DeviceProfileQuery>(){
    public int compare(    DeviceProfileQuery a,    DeviceProfileQuery b){
      return (int)(dist(xy,a.dimens) - dist(xy,b.dimens));
    }
  }
);
  for (int i=0; i < pointsByNearness.size(); ++i) {
    DeviceProfileQuery p=pointsByNearness.get(i);
    if (i < kNearestNeighbors) {
      float w=weight(xy,p.dimens,pow);
      if (w == Float.POSITIVE_INFINITY) {
        return p.value;
      }
      weights+=w;
    }
  }
  for (int i=0; i < pointsByNearness.size(); ++i) {
    DeviceProfileQuery p=pointsByNearness.get(i);
    if (i < kNearestNeighbors) {
      float w=weight(xy,p.dimens,pow);
      sum+=w * p.value / weights;
    }
  }
  return sum;
}

{
  if (mIsInitialized) {
    DisplayMetrics metrics=new DisplayMetrics();
    mLauncher.getWindowManager().getDefaultDisplay().getMetrics(metrics);
    Bitmap b=Bitmap.createBitmap(getMeasuredWidth(),getMeasuredHeight(),Bitmap.Config.ARGB_8888);
    Canvas c=new Canvas(b);
    if (mBackground == null) {
      if (mDrawIdentifier.equals(WORKSPACE_PORTRAIT) || mDrawIdentifier.equals(WORKSPACE_LANDSCAPE) || mDrawIdentifier.equals(WORKSPACE_LARGE)) {
        mBackground=getResources().getDrawable(R.drawable.bg_cling1);
      }
 else       if (mDrawIdentifier.equals(ALLAPPS_PORTRAIT) || mDrawIdentifier.equals(ALLAPPS_LANDSCAPE) || mDrawIdentifier.equals(ALLAPPS_LARGE)) {
        mBackground=getResources().getDrawable(R.drawable.bg_cling2);
      }
 else       if (mDrawIdentifier.equals(FOLDER_PORTRAIT) || mDrawIdentifier.equals(FOLDER_LANDSCAPE)) {
        mBackground=getResources().getDrawable(R.drawable.bg_cling3);
      }
 else       if (mDrawIdentifier.equals(FOLDER_LARGE)) {
        mBackground=getResources().getDrawable(R.drawable.bg_cling4);
      }
 else       if (mDrawIdentifier.equals(WORKSPACE_CUSTOM)) {
        mBackground=getResources().getDrawable(R.drawable.bg_cling5);
      }
    }
    if (mBackground != null) {
      mBackground.setBounds(0,0,getMeasuredWidth(),getMeasuredHeight());
      mBackground.draw(c);
    }
 else {
      c.drawColor(0x99000000);
    }
    int cx=-1;
    int cy=-1;
    float scale=mRevealRadius / mPunchThroughGraphicCenterRadius;
    int dw=(int)(scale * mPunchThroughGraphic.getIntrinsicWidth());
    int dh=(int)(scale * mPunchThroughGraphic.getIntrinsicHeight());
    int[] positions=getPunchThroughPositions();
    for (int i=0; i < positions.length; i+=2) {
      cx=positions[i];
      cy=positions[i + 1];
      if (cx > -1 && cy > -1) {
        c.drawCircle(cx,cy,mRevealRadius,mErasePaint);
        mPunchThroughGraphic.setBounds(cx - dw / 2,cy - dh / 2,cx + dw / 2,cy + dh / 2);
        mPunchThroughGraphic.draw(c);
      }
    }
    if (mDrawIdentifier.equals(ALLAPPS_PORTRAIT) || mDrawIdentifier.equals(ALLAPPS_LANDSCAPE) || mDrawIdentifier.equals(ALLAPPS_LARGE)) {
      if (mHandTouchGraphic == null) {
        mHandTouchGraphic=getResources().getDrawable(R.drawable.hand);
      }
      int offset=mAppIconSize / 4;
      mHandTouchGraphic.setBounds(cx + offset,cy + offset,cx + mHandTouchGraphic.getIntrinsicWidth() + offset,cy + mHandTouchGraphic.getIntrinsicHeight() + offset);
      mHandTouchGraphic.draw(c);
    }
    canvas.drawBitmap(b,0,0,null);
    c.setBitmap(null);
    b=null;
  }
  super.dispatchDraw(canvas);
}

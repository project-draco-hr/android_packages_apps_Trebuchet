{
  super(context,attrs);
  setAlwaysDrawnWithCacheEnabled(false);
  mInflater=LayoutInflater.from(context);
  mIconCache=(LauncherAppState.getInstance()).getIconCache();
  Resources res=getResources();
  mMaxCountX=mMaxVisibleX=res.getInteger(R.integer.folder_max_count_x);
  mMaxCountY=mMaxVisibleY=res.getInteger(R.integer.folder_max_count_y);
  mMaxNumItems=res.getInteger(R.integer.folder_max_num_items);
  if (mMaxCountY == -1) {
    mMaxCountY=Integer.MAX_VALUE;
    mMaxVisibleX=LauncherModel.getCellCountX() + 1;
  }
  if (mMaxNumItems == -1) {
    mMaxNumItems=Integer.MAX_VALUE;
    mMaxVisibleY=LauncherModel.getCellCountY() + 1;
  }
  if (mMaxCountX == 0) {
    mMaxCountX=mMaxVisibleX=LauncherModel.getCellCountX();
    mMaxVisibleX++;
  }
  if (mMaxCountY == 0) {
    mMaxCountY=mMaxVisibleY=LauncherModel.getCellCountY();
    mMaxVisibleY++;
  }
  if (mMaxNumItems == 0) {
    mMaxNumItems=mMaxCountX * mMaxCountY;
    if (mMaxNumItems < 0) {
      mMaxNumItems=Integer.MAX_VALUE;
    }
  }
  mInputMethodManager=(InputMethodManager)getContext().getSystemService(Context.INPUT_METHOD_SERVICE);
  mExpandDuration=res.getInteger(R.integer.config_folderAnimDuration);
  if (sDefaultFolderName == null) {
    sDefaultFolderName=res.getString(R.string.folder_name);
  }
  if (sHintText == null) {
    sHintText=res.getString(R.string.folder_hint_text);
  }
  if (sMinScrollBandHeight == -1) {
    sMinScrollBandHeight=res.getDimensionPixelSize(R.dimen.min_scroll_band_size);
  }
  if (sScrollBandFactor == -1f) {
    sScrollBandFactor=res.getInteger(R.integer.scroll_band_factor) / 100f;
  }
  if (sScrollBandMaxFactor == -1f) {
    sScrollBandMaxFactor=res.getInteger(R.integer.scroll_band_max_factor) / 100f;
  }
  mLauncher=(Launcher)context;
  setFocusableInTouchMode(true);
}

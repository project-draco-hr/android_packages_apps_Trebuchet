{
  mDragLayer=(DragLayer)findViewById(R.id.drag_layer);
  final DragLayer dragLayer=mDragLayer;
  mWorkspace=(Workspace)dragLayer.findViewById(R.id.workspace);
  final Workspace workspace=mWorkspace;
  mDrawer=(SlidingDrawer)dragLayer.findViewById(R.id.drawer);
  final SlidingDrawer drawer=mDrawer;
  mAllAppsGrid=(AllAppsGridView)drawer.getContent();
  final AllAppsGridView grid=mAllAppsGrid;
  final DeleteZone deleteZone=(DeleteZone)dragLayer.findViewById(R.id.delete_zone);
  mHandleView=(HandleView)drawer.findViewById(R.id.all_apps);
  mHandleView.setLauncher(this);
  mHandleIcon=(TransitionDrawable)mHandleView.getDrawable();
  mHandleIcon.setCrossFadeEnabled(true);
  drawer.lock();
  final DrawerManager drawerManager=new DrawerManager();
  drawer.setOnDrawerOpenListener(drawerManager);
  drawer.setOnDrawerCloseListener(drawerManager);
  drawer.setOnDrawerScrollListener(drawerManager);
  grid.setTextFilterEnabled(false);
  grid.setDragger(dragLayer);
  grid.setLauncher(this);
  workspace.setOnLongClickListener(this);
  workspace.setDragger(dragLayer);
  workspace.setLauncher(this);
  loadWallpaper();
  deleteZone.setLauncher(this);
  deleteZone.setDragController(dragLayer);
  deleteZone.setHandle(mHandleView);
  dragLayer.setIgnoredDropTarget(grid);
  dragLayer.setDragScoller(workspace);
  dragLayer.setDragListener(deleteZone);
  mGesturesPanel=mInflater.inflate(R.layout.gestures,mDragLayer,false);
  final View gesturesPanel=mGesturesPanel;
  mGesturesPrompt=(ViewSwitcher)gesturesPanel.findViewById(R.id.gestures_actions);
  mGesturesAction=new GesturesAction();
  mGesturesPrompt.getChildAt(0).setOnClickListener(mGesturesAction);
  mGesturesPrompt.getChildAt(1).setOnClickListener(mGesturesAction);
  mGesturesAdd=(ImageView)gesturesPanel.findViewById(R.id.gestures_add);
  final ImageView gesturesAdd=mGesturesAdd;
  gesturesAdd.setAlpha(128);
  gesturesAdd.setEnabled(false);
  gesturesAdd.setOnClickListener(new View.OnClickListener(){
    public void onClick(    View v){
      createGesture();
    }
  }
);
  mGesturesOverlay=(GestureOverlayView)gesturesPanel.findViewById(R.id.gestures_overlay);
  mGesturesProcessor=new GesturesProcessor();
  final GestureOverlayView overlay=mGesturesOverlay;
  overlay.addOnGestureListener(mGesturesProcessor);
  overlay.getGesturePaint().setXfermode(new PorterDuffXfermode(PorterDuff.Mode.MULTIPLY));
}

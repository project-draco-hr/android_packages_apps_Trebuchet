{
  final Configuration configuration=getResources().getConfiguration();
  final boolean keyboardShowing=configuration.keyboardHidden != Configuration.KEYBOARDHIDDEN_YES;
  final boolean hasKeyboard=configuration.keyboard != Configuration.KEYBOARD_NOKEYS;
  final InputMethodManager inputManager=(InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
  return (hasKeyboard && keyboardShowing) || (!hasKeyboard && !inputManager.isFullscreenMode());
}

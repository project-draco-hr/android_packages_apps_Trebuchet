{
  Bundle extras=data.getExtras();
  int gadgetId=extras.getInt(GadgetManager.EXTRA_GADGET_ID,-1);
  Log.d(LOG_TAG,"dumping extras content=" + extras.toString());
  GadgetProviderInfo gadgetInfo=mGadgetManager.getGadgetInfo(gadgetId);
  CellLayout layout=(CellLayout)mWorkspace.getChildAt(cellInfo.screen);
  int[] spans=layout.rectToCell(gadgetInfo.minWidth,gadgetInfo.minHeight);
  final int[] xy=mCellCoordinates;
  if (!findSlot(cellInfo,xy,spans[0],spans[1]))   return;
  LauncherGadgetInfo launcherInfo=new LauncherGadgetInfo(gadgetId);
  launcherInfo.spanX=spans[0];
  launcherInfo.spanY=spans[1];
  LauncherModel.addItemToDatabase(this,launcherInfo,LauncherSettings.Favorites.CONTAINER_DESKTOP,mWorkspace.getCurrentScreen(),xy[0],xy[1],false);
  if (!mRestoring) {
    sModel.addDesktopItem(launcherInfo);
    launcherInfo.hostView=mGadgetHost.createView(this,gadgetId,gadgetInfo);
    launcherInfo.hostView.setGadget(gadgetId,gadgetInfo);
    launcherInfo.hostView.setTag(launcherInfo);
    mWorkspace.addInCurrentScreen(launcherInfo.hostView,xy[0],xy[1],launcherInfo.spanX,launcherInfo.spanY,insertAtFirst);
  }
 else   if (sModel.isDesktopLoaded()) {
    sModel.addDesktopItem(launcherInfo);
  }
}

{
  if (savedState == null) {
    return;
  }
  final int currentScreen=savedState.getInt(RUNTIME_STATE_CURRENT_SCREEN,-1);
  if (currentScreen > -1) {
    mWorkspace.setCurrentScreen(currentScreen);
  }
  final int addScreen=savedState.getInt(RUNTIME_STATE_PENDING_ADD_SCREEN,-1);
  if (addScreen > -1) {
    mAddItemCellInfo=new CellLayout.CellInfo();
    final CellLayout.CellInfo addItemCellInfo=mAddItemCellInfo;
    addItemCellInfo.valid=true;
    addItemCellInfo.screen=addScreen;
    addItemCellInfo.cellX=savedState.getInt(RUNTIME_STATE_PENDING_ADD_CELL_X);
    addItemCellInfo.cellY=savedState.getInt(RUNTIME_STATE_PENDING_ADD_CELL_Y);
    addItemCellInfo.spanX=savedState.getInt(RUNTIME_STATE_PENDING_ADD_SPAN_X);
    addItemCellInfo.spanY=savedState.getInt(RUNTIME_STATE_PENDING_ADD_SPAN_Y);
    addItemCellInfo.findVacantCellsFromOccupied(savedState.getBooleanArray(RUNTIME_STATE_PENDING_ADD_OCCUPIED_CELLS),savedState.getInt(RUNTIME_STATE_PENDING_ADD_COUNT_X),savedState.getInt(RUNTIME_STATE_PENDING_ADD_COUNT_Y));
    mRestoring=true;
  }
  boolean renameFolder=savedState.getBoolean(RUNTIME_STATE_PENDING_FOLDER_RENAME,false);
  if (renameFolder) {
    long id=savedState.getLong(RUNTIME_STATE_PENDING_FOLDER_RENAME_ID);
    mFolderInfo=sModel.getFolderById(this,id);
    mRestoring=true;
  }
  mCurrentGesture=(Gesture)savedState.get(RUNTIME_STATE_PENDING_GESTURE);
  boolean gesturesShowing=savedState.getBoolean(RUNTIME_STATE_GESTURES_PANEL,false);
  if (gesturesShowing) {
    if (mCurrentGesture == null) {
      mCurrentGesture=(Gesture)savedState.get(RUNTIME_STATE_GESTURES_PANEL_GESTURE);
    }
    final Gesture gesture=mCurrentGesture;
    mWorkspace.post(new Runnable(){
      public void run(){
        showGesturesPanel(false);
        mGesturesProcessor.matchGesture(gesture);
        mWorkspace.post(new Runnable(){
          public void run(){
            if (gesture != null) {
              mGesturesOverlay.setGesture(gesture);
            }
          }
        }
);
      }
    }
);
  }
}

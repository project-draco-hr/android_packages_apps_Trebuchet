{
  Object tag=view.getTag();
  if (tag instanceof AddAdapter.ListItem) {
    AddAdapter.ListItem item=(AddAdapter.ListItem)tag;
    cleanup();
switch (item.actionTag) {
case AddAdapter.ITEM_APPLICATION:
{
        Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
        mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
        Intent pickIntent=new Intent(Intent.ACTION_PICK_ACTIVITY);
        pickIntent.putExtra(Intent.EXTRA_INTENT,mainIntent);
        startActivityForResult(pickIntent,REQUEST_PICK_APPLICATION);
        break;
      }
case AddAdapter.ITEM_SHORTCUT:
{
      Intent shortcutIntent=new Intent(Intent.ACTION_CREATE_SHORTCUT);
      Intent pickIntent=new Intent(Intent.ACTION_PICK_ACTIVITY);
      pickIntent.putExtra(Intent.EXTRA_INTENT,shortcutIntent);
      pickIntent.putExtra(Intent.EXTRA_TITLE,getText(R.string.title_select_shortcut));
      startActivityForResult(pickIntent,REQUEST_PICK_SHORTCUT);
      break;
    }
case AddAdapter.ITEM_SEARCH:
{
    addSearch();
    break;
  }
case AddAdapter.ITEM_APPWIDGET:
{
  int appWidgetId=Launcher.this.mAppWidgetHost.allocateAppWidgetId();
  Intent pickIntent=new Intent(AppWidgetManager.ACTION_APPWIDGET_PICK);
  pickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetId);
  ArrayList<AppWidgetProviderInfo> customInfo=new ArrayList<AppWidgetProviderInfo>();
  AppWidgetProviderInfo info=new AppWidgetProviderInfo();
  info.provider=new ComponentName(getPackageName(),"XXX.YYY");
  info.label=getString(R.string.group_search);
  info.icon=R.drawable.ic_search_widget;
  customInfo.add(info);
  pickIntent.putParcelableArrayListExtra(AppWidgetManager.EXTRA_CUSTOM_INFO,customInfo);
  ArrayList<Bundle> customExtras=new ArrayList<Bundle>();
  Bundle b=new Bundle();
  b.putString(EXTRA_CUSTOM_WIDGET,SEARCH_WIDGET);
  customExtras.add(b);
  pickIntent.putParcelableArrayListExtra(AppWidgetManager.EXTRA_CUSTOM_EXTRAS,customExtras);
  startActivityForResult(pickIntent,REQUEST_PICK_APPWIDGET);
  break;
}
case AddAdapter.ITEM_LIVE_FOLDER:
{
Intent liveFolderIntent=new Intent(LiveFolders.ACTION_CREATE_LIVE_FOLDER);
Intent pickIntent=new Intent(Intent.ACTION_PICK_ACTIVITY);
pickIntent.putExtra(Intent.EXTRA_INTENT,liveFolderIntent);
pickIntent.putExtra(Intent.EXTRA_TITLE,getText(R.string.title_select_live_folder));
startActivityForResult(pickIntent,REQUEST_PICK_LIVE_FOLDER);
break;
}
case AddAdapter.ITEM_FOLDER:
{
addFolder(!mDesktopLocked);
dismissDialog(DIALOG_CREATE_SHORTCUT);
break;
}
case AddAdapter.ITEM_WALLPAPER:
{
startWallpaper();
break;
}
}
}
}

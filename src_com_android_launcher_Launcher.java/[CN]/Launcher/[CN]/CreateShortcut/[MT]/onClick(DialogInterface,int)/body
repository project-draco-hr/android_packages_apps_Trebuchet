{
  Resources res=getResources();
  cleanup();
switch (which) {
case AddAdapter.ITEM_SHORTCUT:
{
      Bundle bundle=new Bundle();
      ArrayList<String> shortcutNames=new ArrayList<String>();
      shortcutNames.add(res.getString(R.string.group_applications));
      bundle.putStringArrayList(Intent.EXTRA_SHORTCUT_NAME,shortcutNames);
      ArrayList<ShortcutIconResource> shortcutIcons=new ArrayList<ShortcutIconResource>();
      shortcutIcons.add(ShortcutIconResource.fromContext(Launcher.this,R.drawable.ic_launcher_application));
      bundle.putParcelableArrayList(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,shortcutIcons);
      Intent pickIntent=new Intent(Intent.ACTION_PICK_ACTIVITY);
      pickIntent.putExtra(Intent.EXTRA_INTENT,new Intent(Intent.ACTION_CREATE_SHORTCUT));
      pickIntent.putExtra(Intent.EXTRA_TITLE,getText(R.string.title_select_shortcut));
      pickIntent.putExtras(bundle);
      startActivityForResult(pickIntent,REQUEST_PICK_SHORTCUT);
      break;
    }
case AddAdapter.ITEM_APPWIDGET:
{
    int appWidgetId=Launcher.this.mAppWidgetHost.allocateAppWidgetId();
    Intent pickIntent=new Intent(AppWidgetManager.ACTION_APPWIDGET_PICK);
    pickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetId);
    ArrayList<AppWidgetProviderInfo> customInfo=new ArrayList<AppWidgetProviderInfo>();
    AppWidgetProviderInfo info=new AppWidgetProviderInfo();
    info.provider=new ComponentName(getPackageName(),"XXX.YYY");
    info.label=getString(R.string.group_search);
    info.icon=R.drawable.ic_search_widget;
    customInfo.add(info);
    pickIntent.putParcelableArrayListExtra(AppWidgetManager.EXTRA_CUSTOM_INFO,customInfo);
    ArrayList<Bundle> customExtras=new ArrayList<Bundle>();
    Bundle b=new Bundle();
    b.putString(EXTRA_CUSTOM_WIDGET,SEARCH_WIDGET);
    customExtras.add(b);
    pickIntent.putParcelableArrayListExtra(AppWidgetManager.EXTRA_CUSTOM_EXTRAS,customExtras);
    startActivityForResult(pickIntent,REQUEST_PICK_APPWIDGET);
    break;
  }
case AddAdapter.ITEM_LIVE_FOLDER:
{
  Bundle bundle=new Bundle();
  ArrayList<String> shortcutNames=new ArrayList<String>();
  shortcutNames.add(res.getString(R.string.group_folder));
  bundle.putStringArrayList(Intent.EXTRA_SHORTCUT_NAME,shortcutNames);
  ArrayList<ShortcutIconResource> shortcutIcons=new ArrayList<ShortcutIconResource>();
  shortcutIcons.add(ShortcutIconResource.fromContext(Launcher.this,R.drawable.ic_launcher_folder));
  bundle.putParcelableArrayList(Intent.EXTRA_SHORTCUT_ICON_RESOURCE,shortcutIcons);
  Intent pickIntent=new Intent(Intent.ACTION_PICK_ACTIVITY);
  pickIntent.putExtra(Intent.EXTRA_INTENT,new Intent(LiveFolders.ACTION_CREATE_LIVE_FOLDER));
  pickIntent.putExtra(Intent.EXTRA_TITLE,getText(R.string.title_select_live_folder));
  pickIntent.putExtras(bundle);
  startActivityForResult(pickIntent,REQUEST_PICK_LIVE_FOLDER);
  break;
}
case AddAdapter.ITEM_WALLPAPER:
{
startWallpaper();
break;
}
}
}

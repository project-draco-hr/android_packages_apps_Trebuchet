{
  super(launcher);
  mDragLayer=launcher.getDragLayer();
  final Resources res=getResources();
  final float scale=res.getInteger(R.integer.config_dragViewScaleFactor) / 100f;
  final float offsetX=res.getDimensionPixelSize(R.dimen.dragViewOffsetX);
  final float offsetY=res.getDimensionPixelSize(R.dimen.dragViewOffsetY);
  mAnim=ValueAnimator.ofFloat(0.0f,1.0f);
  mAnim.setDuration(150);
  mAnim.setInterpolator(new DecelerateInterpolator(2.5f));
  mAnim.addUpdateListener(new AnimatorUpdateListener(){
    @Override public void onAnimationUpdate(    ValueAnimator animation){
      final float value=(Float)animation.getAnimatedValue();
      final int deltaX=(int)((value * offsetX) - mOffsetX);
      final int deltaY=(int)((value * offsetY) - mOffsetY);
      mOffsetX+=deltaX;
      mOffsetY+=deltaY;
      setScaleX(1f + (value * (scale - 1f)));
      setScaleY(1f + (value * (scale - 1f)));
      setAlpha(sDragAlpha * value + (1f - value));
      if (getParent() == null) {
        animation.cancel();
      }
 else {
        DragLayer.LayoutParams lp=mLayoutParams;
        lp.x+=deltaX;
        lp.y+=deltaY;
        lp.width=mBitmap.getWidth();
        lp.height=mBitmap.getHeight();
        mDragLayer.requestLayout();
      }
    }
  }
);
  mBitmap=Bitmap.createBitmap(bitmap,left,top,width,height);
  setDragRegion(new Rect(0,0,width,height));
  mRegistrationX=registrationX;
  mRegistrationY=registrationY;
  int ms=View.MeasureSpec.makeMeasureSpec(0,View.MeasureSpec.UNSPECIFIED);
  measure(ms,ms);
}

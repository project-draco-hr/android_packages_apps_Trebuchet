{
  Set<String> savedIds=getSavedIdsByType(Key.FAVORITE,in);
  if (DEBUG)   Log.d(TAG,"favorite savedIds.size()=" + savedIds.size());
  ContentResolver cr=mContext.getContentResolver();
  Cursor cursor=cr.query(Favorites.CONTENT_URI,FAVORITE_PROJECTION,null,null,null);
  Set<String> currentIds=new HashSet<String>(cursor.getCount());
  try {
    cursor.moveToPosition(-1);
    while (cursor.moveToNext()) {
      final long id=cursor.getLong(ID_INDEX);
      final long updateTime=cursor.getLong(ID_MODIFIED);
      Key key=getKey(Key.FAVORITE,id);
      keys.add(key);
      final String backupKey=keyToBackupKey(key);
      currentIds.add(backupKey);
      if (!savedIds.contains(backupKey) || updateTime >= in.t) {
        byte[] blob=packFavorite(cursor);
        writeRowToBackup(key,blob,out,data);
      }
    }
  }
  finally {
    cursor.close();
  }
  if (DEBUG)   Log.d(TAG,"favorite currentIds.size()=" + currentIds.size());
  savedIds.removeAll(currentIds);
  out.rows+=removeDeletedKeysFromBackup(savedIds,data);
}

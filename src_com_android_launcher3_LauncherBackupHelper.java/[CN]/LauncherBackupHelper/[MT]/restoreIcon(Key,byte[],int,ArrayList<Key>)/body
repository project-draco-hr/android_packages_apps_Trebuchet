{
  if (VERBOSE)   Log.v(TAG,"unpacking icon " + key.id);
  if (DEBUG)   Log.d(TAG,"read (" + buffer.length + "): "+ Base64.encodeToString(buffer,0,dataSize,Base64.NO_WRAP));
  try {
    Resource res=unpackIcon(buffer,0,dataSize);
    if (DEBUG) {
      Log.d(TAG,"unpacked " + res.dpi + " dpi icon");
    }
    if (DEBUG_PAYLOAD) {
      Log.d(TAG,"read " + Base64.encodeToString(res.data,0,res.data.length,Base64.NO_WRAP));
    }
    Bitmap icon=BitmapFactory.decodeByteArray(res.data,0,res.data.length);
    if (icon == null) {
      Log.w(TAG,"failed to unpack icon for " + key.name);
    }
    if (!mRestoreEnabled) {
      if (VERBOSE) {
        Log.v(TAG,"restore not enabled: skipping database mutation");
      }
      return;
    }
 else {
      if (VERBOSE)       Log.v(TAG,"saving restored icon as: " + key.name);
      IconCache.preloadIcon(mContext,ComponentName.unflattenFromString(key.name),icon,res.dpi);
    }
  }
 catch (  IOException e) {
    Log.d(TAG,"failed to save restored icon for: " + key.name,e);
  }
}

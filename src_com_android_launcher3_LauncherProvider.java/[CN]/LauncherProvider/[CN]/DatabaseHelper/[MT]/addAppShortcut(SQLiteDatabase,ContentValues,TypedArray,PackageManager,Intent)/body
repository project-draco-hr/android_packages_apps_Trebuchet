{
  if (a.hasValue(R.styleable.Favorite_packageName) && a.hasValue(R.styleable.Favorite_className)) {
    ActivityInfo info;
    String packageName=a.getString(R.styleable.Favorite_packageName);
    String className=a.getString(R.styleable.Favorite_className);
    try {
      ComponentName cn;
      try {
        cn=new ComponentName(packageName,className);
        info=packageManager.getActivityInfo(cn,0);
      }
 catch (      PackageManager.NameNotFoundException nnfe) {
        String[] packages=packageManager.currentToCanonicalPackageNames(new String[]{packageName});
        cn=new ComponentName(packages[0],className);
        info=packageManager.getActivityInfo(cn,0);
      }
      intent.setComponent(cn);
      intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
      return addAppShortcut(db,values,info.loadLabel(packageManager).toString(),intent);
    }
 catch (    PackageManager.NameNotFoundException e) {
      Log.w(TAG,"Unable to add favorite: " + packageName + "/"+ className,e);
    }
    return -1;
  }
 else   if (a.hasValue(R.styleable.Favorite_uri)) {
    return addAppShortcutByUri(db,values,a,packageManager,intent);
  }
 else {
    Log.e(TAG,"Skipping invalid <favorite> with no component or uri");
    return -1;
  }
}

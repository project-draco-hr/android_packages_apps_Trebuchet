{
  String spKey=LauncherAppState.getSharedPreferencesKey();
  SharedPreferences sp=getContext().getSharedPreferences(spKey,Context.MODE_PRIVATE);
  if (sp.getBoolean(EMPTY_DATABASE_CREATED,false)) {
    Log.d(TAG,"loading default workspace");
    Resources res=getContext().getResources();
    int workspaceResId=origWorkspaceResId;
    if (workspaceResId == 0) {
      final Partner partner=Partner.get(getContext().getPackageManager());
      if (partner != null && partner.hasDefaultLayout()) {
        final Resources partnerRes=partner.getResources();
        workspaceResId=partnerRes.getIdentifier(Partner.RESOURCE_DEFAULT_LAYOUT,"xml",partner.getPackageName());
        res=partnerRes;
      }
    }
    if (workspaceResId == 0) {
      workspaceResId=sp.getInt(DEFAULT_WORKSPACE_RESOURCE_ID,getDefaultWorkspaceResourceId());
    }
    SharedPreferences.Editor editor=sp.edit();
    editor.remove(EMPTY_DATABASE_CREATED);
    if (origWorkspaceResId != 0) {
      editor.putInt(DEFAULT_WORKSPACE_RESOURCE_ID,origWorkspaceResId);
    }
    mOpenHelper.loadFavorites(mOpenHelper.getWritableDatabase(),res,workspaceResId);
    editor.commit();
  }
}

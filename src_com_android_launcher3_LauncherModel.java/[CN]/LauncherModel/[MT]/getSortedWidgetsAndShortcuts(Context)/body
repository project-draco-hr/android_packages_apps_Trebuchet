{
  PackageManager packageManager=context.getPackageManager();
  final ArrayList<Object> widgetsAndShortcuts=new ArrayList<Object>();
  widgetsAndShortcuts.addAll(AppWidgetManagerCompat.getInstance(context).getAllProviders());
  Intent shortcutsIntent=new Intent(Intent.ACTION_CREATE_SHORTCUT);
  widgetsAndShortcuts.addAll(packageManager.queryIntentActivities(shortcutsIntent,0));
  Collections.sort(widgetsAndShortcuts,new WidgetAndShortcutNameComparator(context));
  return widgetsAndShortcuts;
}

{
  if (DEBUG_LOADERS)   Log.d(TAG,"onReceive intent=" + intent);
  final String action=intent.getAction();
  if (Intent.ACTION_PACKAGE_CHANGED.equals(action) || Intent.ACTION_PACKAGE_REMOVED.equals(action) || Intent.ACTION_PACKAGE_ADDED.equals(action)) {
    final String packageName=intent.getData().getSchemeSpecificPart();
    final boolean replacing=intent.getBooleanExtra(Intent.EXTRA_REPLACING,false);
    int op=PackageUpdatedTask.OP_NONE;
    if (packageName == null || packageName.length() == 0) {
      return;
    }
    if (Intent.ACTION_PACKAGE_CHANGED.equals(action)) {
      op=PackageUpdatedTask.OP_UPDATE;
    }
 else     if (Intent.ACTION_PACKAGE_REMOVED.equals(action)) {
      if (!replacing) {
        op=PackageUpdatedTask.OP_REMOVE;
      }
    }
 else     if (Intent.ACTION_PACKAGE_ADDED.equals(action)) {
      if (!replacing) {
        op=PackageUpdatedTask.OP_ADD;
      }
 else {
        op=PackageUpdatedTask.OP_UPDATE;
      }
    }
    if (op != PackageUpdatedTask.OP_NONE) {
      enqueuePackageUpdated(new PackageUpdatedTask(op,new String[]{packageName}));
    }
  }
 else   if (Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE.equals(action)) {
    final boolean replacing=intent.getBooleanExtra(Intent.EXTRA_REPLACING,false);
    String[] packages=intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);
    if (!replacing) {
      enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_ADD,packages));
      if (mAppsCanBeOnRemoveableStorage) {
        startLoaderFromBackground();
      }
    }
 else {
      enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UPDATE,packages));
    }
  }
 else   if (Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE.equals(action)) {
    final boolean replacing=intent.getBooleanExtra(Intent.EXTRA_REPLACING,false);
    if (!replacing) {
      String[] packages=intent.getStringArrayExtra(Intent.EXTRA_CHANGED_PACKAGE_LIST);
      enqueuePackageUpdated(new PackageUpdatedTask(PackageUpdatedTask.OP_UNAVAILABLE,packages));
    }
  }
 else   if (Intent.ACTION_LOCALE_CHANGED.equals(action)) {
    forceReload();
  }
 else   if (Intent.ACTION_CONFIGURATION_CHANGED.equals(action)) {
    Configuration currentConfig=context.getResources().getConfiguration();
    if (mPreviousConfigMcc != currentConfig.mcc) {
      Log.d(TAG,"Reload apps on config change. curr_mcc:" + currentConfig.mcc + " prevmcc:"+ mPreviousConfigMcc);
      forceReload();
    }
    mPreviousConfigMcc=currentConfig.mcc;
  }
 else   if (SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED.equals(action) || SearchManager.INTENT_ACTION_SEARCHABLES_CHANGED.equals(action)) {
    if (mCallbacks != null) {
      Callbacks callbacks=mCallbacks.get();
      if (callbacks != null) {
        callbacks.bindSearchablesChanged();
      }
    }
  }
}

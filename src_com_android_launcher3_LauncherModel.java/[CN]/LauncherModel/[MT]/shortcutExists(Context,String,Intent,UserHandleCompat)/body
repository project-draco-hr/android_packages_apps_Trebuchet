{
  final ContentResolver cr=context.getContentResolver();
  final Intent intentWithPkg, intentWithoutPkg;
  if (intent.getComponent() != null) {
    if (intent.getPackage() != null) {
      intentWithPkg=intent;
      intentWithoutPkg=new Intent(intent).setPackage(null);
    }
 else {
      intentWithPkg=new Intent(intent).setPackage(intent.getComponent().getPackageName());
      intentWithoutPkg=intent;
    }
  }
 else {
    intentWithPkg=intent;
    intentWithoutPkg=intent;
  }
  String userSerial=Long.toString(UserManagerCompat.getInstance(context).getSerialNumberForUser(user));
  Cursor c=cr.query(LauncherSettings.Favorites.CONTENT_URI,new String[]{"title","intent","profileId"},"title=? and (intent=? or intent=?) and profileId=?",new String[]{title,intentWithPkg.toUri(0),intentWithoutPkg.toUri(0),userSerial},null);
  try {
    return c.moveToFirst();
  }
  finally {
    c.close();
  }
}

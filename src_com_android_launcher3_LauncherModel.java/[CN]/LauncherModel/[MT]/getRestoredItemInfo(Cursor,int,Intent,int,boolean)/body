{
  final ShortcutInfo info=new ShortcutInfo();
  info.user=UserHandleCompat.myUserHandle();
  mIconCache.getTitleAndIcon(info,intent,info.user,useLowResIcon);
  if ((promiseType & ShortcutInfo.FLAG_RESTORED_ICON) != 0) {
    String title=(cursor != null) ? cursor.getString(titleIndex) : null;
    if (!TextUtils.isEmpty(title)) {
      info.title=Utilities.trim(title);
    }
  }
 else   if ((promiseType & ShortcutInfo.FLAG_AUTOINTALL_ICON) != 0) {
    if (TextUtils.isEmpty(info.title)) {
      info.title=(cursor != null) ? Utilities.trim(cursor.getString(titleIndex)) : "";
    }
  }
 else {
    throw new InvalidParameterException("Invalid restoreType " + promiseType);
  }
  info.contentDescription=mUserManager.getBadgedLabelForUser(info.title,info.user);
  info.itemType=LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;
  info.promisedIntent=intent;
  info.status=promiseType;
  return info;
}

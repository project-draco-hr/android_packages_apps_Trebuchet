{
  Bitmap icon=null;
  final ShortcutInfo info=new ShortcutInfo();
  info.user=UserHandleCompat.myUserHandle();
  info.itemType=LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;
  info.title=c.getString(titleIndex);
  int iconType=c.getInt(iconTypeIndex);
switch (iconType) {
case LauncherSettings.Favorites.ICON_TYPE_RESOURCE:
    String packageName=c.getString(iconPackageIndex);
  String resourceName=c.getString(iconResourceIndex);
info.customIcon=false;
icon=Utilities.createIconBitmap(packageName,resourceName,mIconCache,context);
if (icon == null) {
icon=Utilities.createIconBitmap(c,iconIndex,context);
}
if (icon == null) {
icon=mIconCache.getDefaultIcon(info.user);
info.usingFallbackIcon=true;
}
break;
case LauncherSettings.Favorites.ICON_TYPE_BITMAP:
icon=Utilities.createIconBitmap(c,iconIndex,context);
if (icon == null) {
icon=mIconCache.getDefaultIcon(info.user);
info.customIcon=false;
info.usingFallbackIcon=true;
}
 else {
info.customIcon=true;
}
break;
default :
icon=mIconCache.getDefaultIcon(info.user);
info.usingFallbackIcon=true;
info.customIcon=false;
break;
}
info.setIcon(icon);
return info;
}

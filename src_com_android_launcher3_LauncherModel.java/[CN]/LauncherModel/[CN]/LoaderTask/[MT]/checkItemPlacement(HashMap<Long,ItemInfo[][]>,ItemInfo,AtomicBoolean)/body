{
  LauncherAppState app=LauncherAppState.getInstance();
  DeviceProfile grid=app.getDynamicGrid().getDeviceProfile();
  int countX=(int)grid.numColumns;
  int countY=(int)grid.numRows;
  long containerIndex=item.screenId;
  if (item.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {
    if (mCallbacks == null || mCallbacks.get().isAllAppsButtonRank((int)item.screenId)) {
      deleteOnItemOverlap.set(true);
      return false;
    }
    if (occupied.containsKey(LauncherSettings.Favorites.CONTAINER_HOTSEAT)) {
      if (occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)[(int)item.screenId][0] != null) {
        Log.e(TAG,"Error loading shortcut into hotseat " + item + " into position ("+ item.screenId+ ":"+ item.cellX+ ","+ item.cellY+ ") occupied by "+ occupied.get(LauncherSettings.Favorites.CONTAINER_HOTSEAT)[(int)item.screenId][0]);
        return false;
      }
    }
 else {
      ItemInfo[][] items=new ItemInfo[countX + 1][countY + 1];
      items[(int)item.screenId][0]=item;
      occupied.put((long)LauncherSettings.Favorites.CONTAINER_HOTSEAT,items);
      return true;
    }
  }
 else   if (item.container != LauncherSettings.Favorites.CONTAINER_DESKTOP) {
    return true;
  }
  if (!occupied.containsKey(item.screenId)) {
    ItemInfo[][] items=new ItemInfo[countX + 1][countY + 1];
    occupied.put(item.screenId,items);
  }
  ItemInfo[][] screens=occupied.get(item.screenId);
  for (int x=item.cellX; x < (item.cellX + item.spanX); x++) {
    for (int y=item.cellY; y < (item.cellY + item.spanY); y++) {
      if (screens[x][y] != null) {
        Log.e(TAG,"Error loading shortcut " + item + " into cell ("+ containerIndex+ "-"+ item.screenId+ ":"+ x+ ","+ y+ ") occupied by "+ screens[x][y]);
        return false;
      }
    }
  }
  for (int x=item.cellX; x < (item.cellX + item.spanX); x++) {
    for (int y=item.cellY; y < (item.cellY + item.spanY); y++) {
      screens[x][y]=item;
    }
  }
  return true;
}

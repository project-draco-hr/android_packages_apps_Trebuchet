{
  boolean consume=FocusLogic.shouldConsume(keyCode);
  if (e.getAction() == KeyEvent.ACTION_UP || !consume) {
    return consume;
  }
  int orientation=v.getResources().getConfiguration().orientation;
  if (DEBUG) {
    Log.v(TAG,String.format("Handle WORKSPACE ICONS keyevent=[%s] orientation=%d",KeyEvent.keyCodeToString(keyCode),orientation));
  }
  ShortcutAndWidgetContainer parent=(ShortcutAndWidgetContainer)v.getParent();
  final CellLayout layout=(CellLayout)parent.getParent();
  final Workspace workspace=(Workspace)layout.getParent();
  final ViewGroup launcher=(ViewGroup)workspace.getParent();
  final ViewGroup tabs=(ViewGroup)launcher.findViewById(R.id.search_drop_target_bar);
  final ViewGroup hotseat=(ViewGroup)launcher.findViewById(R.id.hotseat);
  int pageIndex=workspace.indexOfChild(layout);
  int pageCount=workspace.getChildCount();
  final int countX=layout.getCountX();
  int countY=layout.getCountY();
  final int iconIndex=findIndexOfView(parent,v);
  CellLayout hotseatLayout=(CellLayout)hotseat.getChildAt(0);
  ShortcutAndWidgetContainer hotseatParent=hotseatLayout.getShortcutsAndWidgets();
  int[][] matrix;
  if (keyCode == KeyEvent.KEYCODE_DPAD_DOWN && orientation == Configuration.ORIENTATION_PORTRAIT) {
    matrix=FocusLogic.createSparseMatrix(layout,hotseatLayout,orientation);
    countY=countY + 1;
  }
 else   if (keyCode == KeyEvent.KEYCODE_DPAD_LEFT && orientation == Configuration.ORIENTATION_LANDSCAPE) {
    matrix=FocusLogic.createSparseMatrix(layout,hotseatLayout,orientation);
    countY=countY + 1;
  }
 else {
    matrix=FocusLogic.createSparseMatrix(layout);
  }
  int newIconIndex=FocusLogic.handleKeyEvent(keyCode,countX,countY,matrix,iconIndex,pageIndex,pageCount);
  View newIcon=null;
switch (newIconIndex) {
case FocusLogic.NOOP:
    if (keyCode == KeyEvent.KEYCODE_DPAD_UP) {
      newIcon=tabs;
    }
  break;
case FocusLogic.PREVIOUS_PAGE_FIRST_ITEM:
parent=getCellLayoutChildrenForIndex(workspace,pageIndex - 1);
newIcon=parent.getChildAt(0);
workspace.snapToPage(pageIndex - 1);
case FocusLogic.PREVIOUS_PAGE_LAST_ITEM:
parent=getCellLayoutChildrenForIndex(workspace,pageIndex - 1);
newIcon=parent.getChildAt(parent.getChildCount() - 1);
workspace.snapToPage(pageIndex - 1);
break;
case FocusLogic.NEXT_PAGE_FIRST_ITEM:
parent=getCellLayoutChildrenForIndex(workspace,pageIndex + 1);
newIcon=parent.getChildAt(0);
workspace.snapToPage(pageIndex - 1);
break;
case FocusLogic.CURRENT_PAGE_FIRST_ITEM:
newIcon=parent.getChildAt(0);
break;
case FocusLogic.CURRENT_PAGE_LAST_ITEM:
newIcon=parent.getChildAt(parent.getChildCount() - 1);
break;
default :
if (0 <= newIconIndex && newIconIndex < parent.getChildCount()) {
newIcon=parent.getChildAt(newIconIndex);
}
 else if (parent.getChildCount() <= newIconIndex && newIconIndex < parent.getChildCount() + hotseatParent.getChildCount()) {
newIcon=hotseatParent.getChildAt(newIconIndex - parent.getChildCount());
}
break;
}
if (newIcon != null) {
newIcon.requestFocus();
playSoundEffect(keyCode,v);
}
return consume;
}

{
  super.onLayout(changed,left,top,right,bottom);
  if (mDimmedView == null) {
    isDimmedViewUpdatePass=true;
    mDimmedView=Bitmap.createBitmap(getMeasuredWidth(),getMeasuredHeight(),Bitmap.Config.ARGB_8888);
    mDimmedViewCanvas=new Canvas(mDimmedView);
    mDimmedViewCanvas.concat(getMatrix());
    draw(mDimmedViewCanvas);
    int dimmedColor=getContext().getResources().getColor(R.color.dimmed_view_color);
    mDimmedViewCanvas.drawColor(dimmedColor,PorterDuff.Mode.SRC_IN);
    isDimmedViewUpdatePass=false;
  }
}

{
  final int idIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.ID);
  final int intentIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.INTENT);
  final int titleIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.TITLE);
  final int iconTypeIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_TYPE);
  final int iconIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON);
  final int iconPackageIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_PACKAGE);
  final int iconResourceIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.ICON_RESOURCE);
  final int containerIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.CONTAINER);
  final int itemTypeIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.ITEM_TYPE);
  final int screenIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.SCREEN);
  final int cellXIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLX);
  final int cellYIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.CELLY);
  final int uriIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.URI);
  final int displayModeIndex=c.getColumnIndexOrThrow(LauncherSettings.Favorites.DISPLAY_MODE);
  ContentValues[] rows=new ContentValues[c.getCount()];
  int i=0;
  while (c.moveToNext()) {
    ContentValues values=new ContentValues(c.getColumnCount());
    values.put(LauncherSettings.Favorites.ID,c.getLong(idIndex));
    values.put(LauncherSettings.Favorites.INTENT,c.getString(intentIndex));
    values.put(LauncherSettings.Favorites.TITLE,c.getString(titleIndex));
    values.put(LauncherSettings.Favorites.ICON_TYPE,c.getInt(iconTypeIndex));
    values.put(LauncherSettings.Favorites.ICON,c.getBlob(iconIndex));
    values.put(LauncherSettings.Favorites.ICON_PACKAGE,c.getString(iconPackageIndex));
    values.put(LauncherSettings.Favorites.ICON_RESOURCE,c.getString(iconResourceIndex));
    values.put(LauncherSettings.Favorites.CONTAINER,c.getInt(containerIndex));
    values.put(LauncherSettings.Favorites.ITEM_TYPE,c.getInt(itemTypeIndex));
    values.put(LauncherSettings.Favorites.SCREEN,c.getInt(screenIndex));
    values.put(LauncherSettings.Favorites.CELLX,c.getInt(cellXIndex));
    values.put(LauncherSettings.Favorites.CELLY,c.getInt(cellYIndex));
    values.put(LauncherSettings.Favorites.URI,c.getString(uriIndex));
    values.put(LauncherSettings.Favorites.DISPLAY_MODE,c.getInt(displayModeIndex));
    rows[i++]=values;
  }
  db.beginTransaction();
  int total=0;
  try {
    int numValues=rows.length;
    for (i=0; i < numValues; i++) {
      if (db.insert(TABLE_FAVORITES,null,rows[i]) < 0) {
        return 0;
      }
 else {
        total++;
      }
    }
    db.setTransactionSuccessful();
  }
  finally {
    db.endTransaction();
  }
  return total;
}

{
  int alpha=getResources().getInteger(R.integer.promise_icon_alpha);
  final int state=getState();
  if (DEBUG)   Log.d(TAG,"applying icon state: " + state);
switch (state) {
case ShortcutInfo.PACKAGE_STATE_DEFAULT:
    super.setText(mDefaultText);
  alpha=255;
break;
case ShortcutInfo.PACKAGE_STATE_ENQUEUED:
setText(R.string.package_state_enqueued);
break;
case ShortcutInfo.PACKAGE_STATE_DOWNLOADING:
setText(R.string.package_state_downloading);
break;
case ShortcutInfo.PACKAGE_STATE_INSTALLING:
setText(R.string.package_state_installing);
break;
case ShortcutInfo.PACKAGE_STATE_ERROR:
setText(R.string.package_state_error);
break;
case ShortcutInfo.PACKAGE_STATE_UNKNOWN:
default :
setText(R.string.package_state_unknown);
break;
}
if (DEBUG) Log.d(TAG,"setting icon alpha to: " + alpha);
Drawable[] drawables=getCompoundDrawables();
for (int i=0; i < drawables.length; i++) {
if (drawables[i] != null) {
drawables[i].setAlpha(alpha);
}
}
}

{
  super(context,attrs,defStyle);
  setWillNotDraw(false);
  mVacantDrawable=getResources().getDrawable(R.drawable.rounded_rect_green);
  mOccupiedDrawable=getResources().getDrawable(R.drawable.rounded_rect_red);
  TypedArray a=context.obtainStyledAttributes(attrs,R.styleable.CellLayout,defStyle,0);
  mCellWidth=a.getDimensionPixelSize(R.styleable.CellLayout_cellWidth,10);
  mCellHeight=a.getDimensionPixelSize(R.styleable.CellLayout_cellHeight,10);
  mLongAxisStartPadding=a.getDimensionPixelSize(R.styleable.CellLayout_longAxisStartPadding,10);
  mLongAxisEndPadding=a.getDimensionPixelSize(R.styleable.CellLayout_longAxisEndPadding,10);
  mShortAxisStartPadding=a.getDimensionPixelSize(R.styleable.CellLayout_shortAxisStartPadding,10);
  mShortAxisEndPadding=a.getDimensionPixelSize(R.styleable.CellLayout_shortAxisEndPadding,10);
  mShortAxisCells=a.getInt(R.styleable.CellLayout_shortAxisCells,4);
  mLongAxisCells=a.getInt(R.styleable.CellLayout_longAxisCells,4);
  a.recycle();
  setAlwaysDrawnWithCacheEnabled(false);
  mWallpaperManager=WallpaperManager.getInstance(getContext());
  mDimmedBitmapPaint.setFilterBitmap(true);
}

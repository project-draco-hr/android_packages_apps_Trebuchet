{
  final CellInfo cellInfo=mCellInfo;
  final Rect frame=mRect;
  final int x=touchX + mScrollX;
  final int y=touchY + mScrollY;
  final int count=mChildren.getChildCount();
  boolean found=false;
  for (int i=count - 1; i >= 0; i--) {
    final View child=mChildren.getChildAt(i);
    final LayoutParams lp=(LayoutParams)child.getLayoutParams();
    if ((child.getVisibility() == VISIBLE || child.getAnimation() != null) && lp.isLockedToGrid) {
      child.getHitRect(frame);
      final int tmpXY[]=mTmpXY;
      child.getLocationOnScreen(tmpXY);
      frame.offset(mLeftPadding,mTopPadding);
      if (frame.contains(x,y)) {
        cellInfo.cell=child;
        cellInfo.cellX=lp.cellX;
        cellInfo.cellY=lp.cellY;
        cellInfo.spanX=lp.cellHSpan;
        cellInfo.spanY=lp.cellVSpan;
        cellInfo.valid=true;
        found=true;
        break;
      }
    }
  }
  if (!found) {
    final int cellXY[]=mTmpXY;
    pointToCellExact(x,y,cellXY);
    cellInfo.cell=null;
    cellInfo.cellX=cellXY[0];
    cellInfo.cellY=cellXY[1];
    cellInfo.spanX=1;
    cellInfo.spanY=1;
    cellInfo.valid=cellXY[0] >= 0 && cellXY[1] >= 0 && cellXY[0] < mCountX && cellXY[1] < mCountY && !mOccupied[cellXY[0]][cellXY[1]];
  }
  setTag(cellInfo);
}

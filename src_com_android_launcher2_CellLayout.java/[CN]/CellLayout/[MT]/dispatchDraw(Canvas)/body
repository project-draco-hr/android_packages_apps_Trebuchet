{
  final int count=getChildCount();
  if (!mIsCacheDirty) {
    for (int i=0; i < count; i++) {
      final View child=getChildAt(i);
      if (child.isDirty()) {
        mIsCacheDirty=true;
        break;
      }
    }
  }
  boolean useBitmapCache=mIsCacheEnabled && getScaleX() < mMaxScaleForUsingBitmapCache;
  if (mForceCacheUpdate || (useBitmapCache && !mDisableCacheUpdates)) {
    if (mIsCacheDirty) {
      updateCache();
    }
    mForceCacheUpdate=false;
  }
  if (useBitmapCache) {
    mCachePaint.setAlpha((int)(255 * getAlpha()));
    canvas.drawBitmap(mCache,mCacheRect,mBackgroundRect,mCachePaint);
  }
 else {
    super.dispatchDraw(canvas);
  }
}

{
  final int screenCount=getChildCount();
  getVisiblePages(mTempVisiblePagesRange);
  int leftScreen=mTempVisiblePagesRange[0];
  int rightScreen=mTempVisiblePagesRange[1];
  int forceDrawScreen=-1;
  if (leftScreen == rightScreen) {
    if (rightScreen < screenCount - 1) {
      rightScreen++;
      forceDrawScreen=rightScreen;
    }
 else     if (leftScreen > 0) {
      leftScreen--;
      forceDrawScreen=leftScreen;
    }
  }
 else {
    forceDrawScreen=leftScreen + 1;
  }
  for (int i=0; i < screenCount; i++) {
    final View layout=(View)getPageAt(i);
    if (!(leftScreen <= i && i <= rightScreen && (i == forceDrawScreen || shouldDrawChild(layout)))) {
      layout.setLayerType(LAYER_TYPE_NONE,null);
    }
  }
  for (int i=0; i < screenCount; i++) {
    final View layout=(View)getPageAt(i);
    if (leftScreen <= i && i <= rightScreen && (i == forceDrawScreen || shouldDrawChild(layout))) {
      if (layout.getLayerType() != LAYER_TYPE_HARDWARE) {
        layout.setLayerType(LAYER_TYPE_HARDWARE,null);
      }
    }
  }
}

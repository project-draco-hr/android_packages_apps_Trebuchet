{
  final Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
  mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
  final Callbacks callbacks=tryGetCallbacks();
  if (callbacks == null) {
    return;
  }
  final Context context=mContext;
  final PackageManager packageManager=context.getPackageManager();
  final List<ResolveInfo> apps=packageManager.queryIntentActivities(mainIntent,0);
synchronized (mLock) {
    mBeforeFirstLoad=false;
    mAllAppsList.clear();
    if (apps != null) {
      long t=SystemClock.uptimeMillis();
      int N=apps.size();
      Utilities.BubbleText bubble=new Utilities.BubbleText(context);
      for (int i=0; i < N && !mStopped; i++) {
        mAllAppsList.add(AppInfoCache.cache(apps.get(i),context,bubble));
      }
      Collections.sort(mAllAppsList.data,sComparator);
      Collections.sort(mAllAppsList.added,sComparator);
      if (DEBUG_LOADERS) {
        Log.d(TAG,"cached app icons in " + (SystemClock.uptimeMillis() - t) + "ms");
      }
    }
  }
}

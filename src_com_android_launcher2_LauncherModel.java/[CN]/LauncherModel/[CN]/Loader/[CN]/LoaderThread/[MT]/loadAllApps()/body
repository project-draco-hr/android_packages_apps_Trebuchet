{
  final Intent mainIntent=new Intent(Intent.ACTION_MAIN,null);
  mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
  final Callbacks callbacks=tryGetCallbacks();
  if (callbacks == null) {
    return;
  }
  final PackageManager packageManager=mContext.getPackageManager();
  final List<ResolveInfo> apps=packageManager.queryIntentActivities(mainIntent,0);
synchronized (mLock) {
    mBeforeFirstLoad=false;
    mAllAppsList.clear();
    if (apps != null) {
      long t=SystemClock.uptimeMillis();
      int N=apps.size();
      for (int i=0; i < N && !mStopped; i++) {
        mAllAppsList.add(new ApplicationInfo(apps.get(i),mIconCache));
      }
      Collections.sort(mAllAppsList.data,APP_NAME_COMPARATOR);
      Collections.sort(mAllAppsList.added,APP_NAME_COMPARATOR);
      if (DEBUG_LOADERS) {
        Log.d(TAG,"cached app icons in " + (SystemClock.uptimeMillis() - t) + "ms");
      }
    }
  }
}

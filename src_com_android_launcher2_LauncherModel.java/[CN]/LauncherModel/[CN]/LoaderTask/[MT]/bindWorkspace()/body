{
  final long t=SystemClock.uptimeMillis();
  final Callbacks oldCallbacks=mCallbacks.get();
  if (oldCallbacks == null) {
    Log.w(TAG,"LoaderTask running with no launcher");
    return;
  }
  final int currentScreen=oldCallbacks.getCurrentWorkspaceScreen();
  final ArrayList<ItemInfo> tmpWorkspaceItems=unbindWorkspaceItemsOnMainThread();
  Collections.sort(tmpWorkspaceItems,new Comparator<ItemInfo>(){
    @Override public int compare(    ItemInfo lhs,    ItemInfo rhs){
      int cellCountX=LauncherModel.getCellCountX();
      int cellCountY=LauncherModel.getCellCountY();
      int screenOffset=cellCountX * cellCountY;
      int containerOffset=screenOffset * (Launcher.SCREEN_COUNT + 1);
      long lr=(lhs.container * containerOffset + lhs.screen * screenOffset + lhs.cellY * cellCountX + lhs.cellX);
      long rr=(rhs.container * containerOffset + rhs.screen * screenOffset + rhs.cellY * cellCountX + rhs.cellX);
      return (int)(lr - rr);
    }
  }
);
  final ArrayList<ItemInfo> workspaceItems=new ArrayList<ItemInfo>();
  for (  ItemInfo ii : tmpWorkspaceItems) {
    if (ii.container == LauncherSettings.Favorites.CONTAINER_DESKTOP && ii.screen == currentScreen) {
      workspaceItems.add(0,ii);
    }
 else     if (ii.container == LauncherSettings.Favorites.CONTAINER_HOTSEAT) {
      workspaceItems.add(0,ii);
    }
 else {
      workspaceItems.add(ii);
    }
  }
  mHandler.post(new Runnable(){
    public void run(){
      Callbacks callbacks=tryGetCallbacks(oldCallbacks);
      if (callbacks != null) {
        callbacks.startBinding();
      }
    }
  }
);
  int N=workspaceItems.size();
  for (int i=0; i < N; i+=ITEMS_CHUNK) {
    final int start=i;
    final int chunkSize=(i + ITEMS_CHUNK <= N) ? ITEMS_CHUNK : (N - i);
    mHandler.post(new Runnable(){
      public void run(){
        Callbacks callbacks=tryGetCallbacks(oldCallbacks);
        if (callbacks != null) {
          callbacks.bindItems(workspaceItems,start,start + chunkSize);
        }
      }
    }
);
  }
  final HashMap<Long,FolderInfo> folders=new HashMap<Long,FolderInfo>(sBgFolders);
  mHandler.post(new Runnable(){
    public void run(){
      Callbacks callbacks=tryGetCallbacks(oldCallbacks);
      if (callbacks != null) {
        callbacks.bindFolders(folders);
      }
    }
  }
);
  mHandler.post(new Runnable(){
    public void run(){
      if (DEBUG_LOADERS) {
        Log.d(TAG,"Going to start binding widgets soon.");
      }
    }
  }
);
  N=sBgAppWidgets.size();
  for (int i=0; i < N; i++) {
    final LauncherAppWidgetInfo widget=sBgAppWidgets.get(i);
    if (widget.screen == currentScreen) {
      mHandler.post(new Runnable(){
        public void run(){
          Callbacks callbacks=tryGetCallbacks(oldCallbacks);
          if (callbacks != null) {
            callbacks.bindAppWidget(widget);
          }
        }
      }
);
    }
  }
  for (int i=0; i < N; i++) {
    final LauncherAppWidgetInfo widget=sBgAppWidgets.get(i);
    if (widget.screen != currentScreen) {
      mHandler.post(new Runnable(){
        public void run(){
          Callbacks callbacks=tryGetCallbacks(oldCallbacks);
          if (callbacks != null) {
            callbacks.bindAppWidget(widget);
          }
        }
      }
);
    }
  }
  mHandler.post(new Runnable(){
    public void run(){
      Callbacks callbacks=tryGetCallbacks(oldCallbacks);
      if (callbacks != null) {
        callbacks.finishBindingItems();
      }
    }
  }
);
  mHandler.post(new Runnable(){
    public void run(){
      if (DEBUG_LOADERS) {
        Log.d(TAG,"bound workspace in " + (SystemClock.uptimeMillis() - t) + "ms");
      }
      mIsLoadingAndBindingWorkspace=false;
    }
  }
);
}

{
  super(context,attrs,defStyleAttr);
  Resources res=context.getResources();
  mLauncher=(Launcher)context;
  DeviceProfile grid=mLauncher.getDeviceProfile();
  mContainerInset=res.getDimensionPixelSize(R.dimen.all_apps_container_inset);
  mPredictionBarHeight=(int)(grid.allAppsIconSizePx + grid.iconDrawablePaddingOriginalPx + Utilities.calculateTextHeight(grid.allAppsIconTextSizePx)+ 2 * res.getDimensionPixelSize(R.dimen.all_apps_icon_top_bottom_padding) + res.getDimensionPixelSize(R.dimen.all_apps_prediction_bar_bottom_padding));
  mLayoutInflater=LayoutInflater.from(context);
  mNumAppsPerRow=grid.allAppsNumCols;
  mNumPredictedAppsPerRow=grid.allAppsNumPredictiveCols;
  mApps=new AlphabeticalAppsList(context,mNumAppsPerRow,mNumPredictedAppsPerRow);
  mApps.setAdapterChangedCallback(this);
  mAdapter=new AllAppsGridAdapter(context,mApps,mNumAppsPerRow,this,this,mLauncher,this);
  mAdapter.setEmptySearchText(res.getString(R.string.all_apps_loading_message));
  mAdapter.setNumAppsPerRow(mNumAppsPerRow);
  mAdapter.setPredictionRowHeight(mPredictionBarHeight);
  mLayoutManager=mAdapter.getLayoutManager();
  mItemDecoration=mAdapter.getItemDecoration();
  mContentMarginStart=mAdapter.getContentMarginStart();
  mApps.setAdapter(mAdapter);
  mSearchManager=mApps.newSimpleAppSearchManager();
}

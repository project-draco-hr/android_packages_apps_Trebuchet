{
  super.onCreate();
  final int screenSize=getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK;
  sIsScreenLarge=screenSize == Configuration.SCREENLAYOUT_SIZE_LARGE || screenSize == Configuration.SCREENLAYOUT_SIZE_XLARGE;
  sScreenDensity=getResources().getDisplayMetrics().density;
  mIconCache=new IconCache(this);
  mModel=new LauncherModel(this,mIconCache);
  IntentFilter filter=new IntentFilter(Intent.ACTION_PACKAGE_ADDED);
  filter.addAction(Intent.ACTION_PACKAGE_REMOVED);
  filter.addAction(Intent.ACTION_PACKAGE_CHANGED);
  filter.addDataScheme("package");
  registerReceiver(mModel,filter);
  filter=new IntentFilter();
  filter.addAction(Intent.ACTION_EXTERNAL_APPLICATIONS_AVAILABLE);
  filter.addAction(Intent.ACTION_EXTERNAL_APPLICATIONS_UNAVAILABLE);
  filter.addAction(Intent.ACTION_LOCALE_CHANGED);
  registerReceiver(mModel,filter);
  filter=new IntentFilter();
  filter.addAction(SearchManager.INTENT_GLOBAL_SEARCH_ACTIVITY_CHANGED);
  registerReceiver(mModel,filter);
  ContentResolver resolver=getContentResolver();
  resolver.registerContentObserver(LauncherSettings.Favorites.CONTENT_URI,true,mFavoritesObserver);
}

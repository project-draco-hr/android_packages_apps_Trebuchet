{
  if (!hasWindowFocus && hasFocus()) {
    mRestoreFocus=true;
  }
  super.onWindowFocusChanged(hasWindowFocus);
  if (hasWindowFocus && mRestoreFocus) {
    if (isInTouchMode()) {
      final AutoCompleteTextView searchText=mSearchText;
      searchText.setSelectAllOnFocus(false);
      searchText.requestFocusFromTouch();
      searchText.setSelectAllOnFocus(true);
    }
    mRestoreFocus=false;
  }
}

{
  mFilteredApps.clear();
  mSections.clear();
  mSectionedFilteredApps.clear();
  SectionInfo lastSectionInfo=null;
  int position=0;
  int appIndex=0;
  for (  AppInfo info : mApps) {
    String sectionName=mIndexer.computeSectionName(info.title.toString().trim());
    if (mFilter != null && !mFilter.retainApp(info,sectionName)) {
      continue;
    }
    if (lastSectionInfo == null || !lastSectionInfo.sectionName.equals(sectionName)) {
      lastSectionInfo=new SectionInfo(sectionName);
      mSections.add(lastSectionInfo);
      AdapterItem sectionItem=AdapterItem.asSection(position++,sectionName);
      mSectionedFilteredApps.add(sectionItem);
    }
    AdapterItem appItem=AdapterItem.asApp(position++,sectionName,info,appIndex++);
    lastSectionInfo.numAppsInSection++;
    if (lastSectionInfo.firstAppItem == null) {
      lastSectionInfo.firstAppItem=appItem;
    }
    mSectionedFilteredApps.add(appItem);
    mFilteredApps.add(info);
  }
}

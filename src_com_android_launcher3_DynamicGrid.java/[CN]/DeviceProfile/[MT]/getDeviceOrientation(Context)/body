{
  WindowManager windowManager=(WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
  Resources resources=context.getResources();
  DisplayMetrics dm=resources.getDisplayMetrics();
  Configuration config=resources.getConfiguration();
  int rotation=windowManager.getDefaultDisplay().getRotation();
  boolean isLandscape=(config.orientation == Configuration.ORIENTATION_LANDSCAPE) && (rotation == Surface.ROTATION_0 || rotation == Surface.ROTATION_180);
  boolean isRotatedPortrait=(config.orientation == Configuration.ORIENTATION_PORTRAIT) && (rotation == Surface.ROTATION_90 || rotation == Surface.ROTATION_270);
  if (isLandscape || isRotatedPortrait) {
    return CellLayout.LANDSCAPE;
  }
 else {
    return CellLayout.PORTRAIT;
  }
}

{
  mAllocatedContentSize=count;
  int countX=getCountX();
  int countY=getCountY();
  boolean done=false;
  while (!done) {
    int oldCountX=countX;
    int oldCountY=countY;
    if (countX * countY < count) {
      if ((countX <= countY || countY == mMaxCountY) && countX < mMaxCountX) {
        countX++;
      }
 else       if (countY < mMaxCountY) {
        countY++;
      }
      if (countY == 0)       countY++;
    }
 else     if ((countY - 1) * countX >= count && countY >= countX) {
      countY=Math.max(0,countY - 1);
    }
 else     if ((countX - 1) * countY >= count) {
      countX=Math.max(0,countX - 1);
    }
    done=countX == oldCountX && countY == oldCountY;
  }
  setGridSize(countX,countY);
}

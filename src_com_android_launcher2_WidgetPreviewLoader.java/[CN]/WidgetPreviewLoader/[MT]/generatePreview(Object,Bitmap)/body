{
  if (preview != null && (preview.getWidth() != mPreviewBitmapMaxWidth || preview.getHeight() != mPreviewBitmapMaxHeight)) {
    throw new RuntimeException("Improperly sized bitmap passed as argument");
  }
  if (info instanceof AppWidgetProviderInfo) {
    return generateWidgetPreview((AppWidgetProviderInfo)info,preview);
  }
 else {
    return generateShortcutPreview((ResolveInfo)info,mPreviewBitmapMaxWidth,mPreviewBitmapMaxHeight,preview);
  }
}

{
  LauncherAppState app=LauncherAppState.getInstance();
  DeviceProfile grid=app.getDynamicGrid().getDeviceProfile();
  mContext=context;
  mAppIconSize=grid.iconSizePx;
  mIconCache=app.getIconCache();
  mManager=AppWidgetManagerCompat.getInstance(context);
  mDb=app.getWidgetPreviewCacheDb();
  SharedPreferences sp=context.getSharedPreferences(LauncherAppState.getSharedPreferencesKey(),Context.MODE_PRIVATE);
  final String lastVersionName=sp.getString(ANDROID_INCREMENTAL_VERSION_NAME_KEY,null);
  final String versionName=android.os.Build.VERSION.INCREMENTAL;
  final boolean isLollipopOrGreater=Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP;
  if (!versionName.equals(lastVersionName)) {
    try {
      clearDb();
    }
 catch (    SQLiteReadOnlyDatabaseException e) {
      if (isLollipopOrGreater) {
      }
 else {
        throw e;
      }
    }
 finally {
      SharedPreferences.Editor editor=sp.edit();
      editor.putString(ANDROID_INCREMENTAL_VERSION_NAME_KEY,versionName);
      editor.commit();
    }
  }
}

{
  if (preview != null && (preview.getWidth() != mPreviewBitmapWidth || preview.getHeight() != mPreviewBitmapHeight)) {
    throw new RuntimeException("Improperly sized bitmap passed as argument");
  }
  if (info instanceof AppWidgetProviderInfo) {
    return generateWidgetPreview((AppWidgetProviderInfo)info,preview);
  }
 else {
    return generateShortcutPreview((ResolveInfo)info,mPreviewBitmapWidth,mPreviewBitmapHeight,preview);
  }
}

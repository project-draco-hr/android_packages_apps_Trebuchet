{
  final HashMap<ComponentName,AppInfo> appsMap=new HashMap<ComponentName,AppInfo>();
  final HashSet<String> pkgNames=new HashSet<>();
  for (  AppInfo ai : apps) {
    appsMap.put(ai.componentName,ai);
    pkgNames.add(ai.componentName.getPackageName());
  }
  mapOverItems(MAP_RECURSE,new ItemOperator(){
    @Override public boolean evaluate(    ItemInfo info,    View v,    View parent){
      if (info instanceof ShortcutInfo) {
        updateShortcut(appsMap,info,v);
        if (parent != null) {
          parent.invalidate();
        }
      }
      return false;
    }
  }
);
  restorePendingWidgets(pkgNames);
}

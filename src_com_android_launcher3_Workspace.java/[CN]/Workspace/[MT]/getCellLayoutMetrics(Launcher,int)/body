{
  LauncherAppState app=LauncherAppState.getInstance();
  DeviceProfile grid=app.getDynamicGrid().getDeviceProfile();
  Resources res=launcher.getResources();
  Display display=launcher.getWindowManager().getDefaultDisplay();
  Point smallestSize=new Point();
  Point largestSize=new Point();
  display.getCurrentSizeRange(smallestSize,largestSize);
  if (orientation == CellLayout.LANDSCAPE) {
    if (mLandscapeCellLayoutMetrics == null) {
      Rect padding=grid.getWorkspacePadding(CellLayout.LANDSCAPE);
      int width=largestSize.x - padding.left - padding.right;
      int height=smallestSize.y - padding.top - padding.bottom;
      mLandscapeCellLayoutMetrics=new Rect();
      CellLayout.getMetrics(mLandscapeCellLayoutMetrics,res,width,height,LauncherModel.getCellCountX(),LauncherModel.getCellCountY(),orientation);
    }
    return mLandscapeCellLayoutMetrics;
  }
 else   if (orientation == CellLayout.PORTRAIT) {
    if (mPortraitCellLayoutMetrics == null) {
      Rect padding=grid.getWorkspacePadding(CellLayout.PORTRAIT);
      int width=smallestSize.x - padding.left - padding.right;
      int height=largestSize.y - padding.top - padding.bottom;
      mPortraitCellLayoutMetrics=new Rect();
      CellLayout.getMetrics(mPortraitCellLayoutMetrics,res,width,height,LauncherModel.getCellCountX(),LauncherModel.getCellCountY(),orientation);
    }
    return mPortraitCellLayoutMetrics;
  }
  return null;
}

{
  mapOverItems(MAP_RECURSE,new ItemOperator(){
    @Override public boolean evaluate(    ItemInfo info,    View v,    View parent){
      if (info instanceof ShortcutInfo && ((ShortcutInfo)info).isPromiseFor(pkgName) && v instanceof BubbleTextView) {
        ((ShortcutInfo)info).setState(state);
        ((BubbleTextView)v).applyState();
      }
      return false;
    }
  }
);
  if (state == ShortcutInfo.PACKAGE_STATE_DEFAULT) {
    HashSet<String> packages=new HashSet<>();
    packages.add(pkgName);
    restorePendingWidgets(packages);
  }
}

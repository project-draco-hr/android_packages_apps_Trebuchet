{
  int count=cl.getShortcutsAndWidgets().getChildCount();
  ArrayList<View> children=new ArrayList<View>();
  for (int i=0; i < count; i++) {
    View v=cl.getShortcutsAndWidgets().getChildAt(i);
    children.add(v);
  }
  for (int i=0; i < count; i++) {
    View v=children.get(i);
    ItemInfo info=(ItemInfo)v.getTag();
    if (info instanceof ShortcutInfo) {
      ShortcutInfo si=(ShortcutInfo)info;
      ComponentName cn=si.intent.getComponent();
      Uri dataUri=si.intent.getData();
      if (dataUri != null && !dataUri.equals(Uri.EMPTY)) {
        continue;
      }
      if (!uniqueIntents.contains(cn)) {
        uniqueIntents.add(cn);
      }
 else {
        if (stripDuplicates) {
          cl.removeViewInLayout(v);
          LauncherModel.deleteItemFromDatabase(mLauncher,si);
        }
        if (duplicates != null) {
          duplicates.add(cn);
        }
      }
    }
    if (v instanceof FolderIcon) {
      FolderIcon fi=(FolderIcon)v;
      ArrayList<View> items=fi.getFolder().getItemsInReadingOrder();
      for (int j=0; j < items.size(); j++) {
        if (items.get(j).getTag() instanceof ShortcutInfo) {
          ShortcutInfo si=(ShortcutInfo)items.get(j).getTag();
          ComponentName cn=si.intent.getComponent();
          Uri dataUri=si.intent.getData();
          if (dataUri != null && !dataUri.equals(Uri.EMPTY)) {
            continue;
          }
          if (!uniqueIntents.contains(cn)) {
            uniqueIntents.add(cn);
          }
 else {
            if (stripDuplicates) {
              fi.getFolderInfo().remove(si);
              LauncherModel.deleteItemFromDatabase(mLauncher,si);
            }
            if (duplicates != null) {
              duplicates.add(cn);
            }
          }
        }
      }
    }
  }
}

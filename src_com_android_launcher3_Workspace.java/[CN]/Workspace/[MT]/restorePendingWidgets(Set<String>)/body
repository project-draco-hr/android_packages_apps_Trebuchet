{
  final ContentResolver contentResolver=getContext().getContentResolver();
  mapOverItems(MAP_NO_RECURSE,new ItemOperator(){
    @Override public boolean evaluate(    ItemInfo info,    View v,    View parent){
      if (info instanceof LauncherAppWidgetInfo) {
        LauncherAppWidgetInfo widgetInfo=(LauncherAppWidgetInfo)info;
        if (widgetInfo.restoreStatus == LauncherAppWidgetInfo.RESTORE_PROVIDER_PENDING && installedPackaged.contains(widgetInfo.providerName.getPackageName())) {
          ContentValues values=new ContentValues();
          values.put(LauncherSettings.Favorites.RESTORED,LauncherAppWidgetInfo.RESTORE_COMPLETED);
          String where=BaseColumns._ID + "= ?";
          String[] args={Long.toString(widgetInfo.id)};
          contentResolver.update(LauncherSettings.Favorites.CONTENT_URI,values,where,args);
        }
      }
      return false;
    }
  }
);
}

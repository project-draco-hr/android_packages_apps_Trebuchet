{
  final Drawable background=mBackground;
  if (background != null) {
    final int scrollX=mScrollX;
    final int scrollY=mScrollY;
    if (mBackgroundSizeChanged) {
      background.setBounds(0,0,mRight - mLeft,mBottom - mTop);
      mBackgroundSizeChanged=false;
    }
    if ((scrollX | scrollY) == 0) {
      background.draw(canvas);
    }
 else {
      canvas.translate(scrollX,scrollY);
      background.draw(canvas);
      canvas.translate(-scrollX,-scrollY);
    }
  }
  final Layout layout=getLayout();
  if (layout != null) {
    final int offset=getExtendedPaddingTop();
    final int paddingLeft=getPaddingLeft();
    final int paddingRight=getPaddingRight();
    final float left=layout.getLineLeft(0) + paddingLeft;
    final float right=Math.min(layout.getLineRight(0) + paddingRight,left + getWidth() - paddingLeft - paddingRight);
    mRect.set(left - mPaddingH,offset + (int)layout.getLineTop(0) - mPaddingV,right + mPaddingH,offset + (int)layout.getLineBottom(0) + mPaddingV);
    canvas.drawRoundRect(mRect,mCornerRadius,mCornerRadius,mPaint);
  }
  super.draw(canvas);
}

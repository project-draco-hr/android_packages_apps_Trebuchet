{
  final ArrayList<ApplicationInfo> appsList=mAllApps.mAllAppsList;
  if (appsList == null || index < 0 || index >= appsList.size()) {
    if (mAllApps != null) {
      mAllApps.mRestoreFocusIndex=index;
    }
    mScript.set_gSelectedIconIndex(-1);
    if (mAllApps.mLastSelection == SELECTION_ICONS) {
      mAllApps.mLastSelection=SELECTION_NONE;
    }
  }
 else {
    if (pressed == SELECTED_FOCUSED) {
      mAllApps.mLastSelection=SELECTION_ICONS;
    }
    int prev=mScript.get_gSelectedIconIndex();
    mScript.set_gSelectedIconIndex(index);
    ApplicationInfo info=appsList.get(index);
    Bitmap selectionBitmap=mSelectionBitmap;
    Utilities.drawSelectedAllAppsBitmap(mSelectionCanvas,selectionBitmap.getWidth(),selectionBitmap.getHeight(),pressed == SELECTED_PRESSED,info.iconBitmap);
    Allocation si=Allocation.createFromBitmap(sRS,selectionBitmap);
    mScript.set_gSelectedIconTexture(si);
    if (prev != index) {
      if (info.title != null && info.title.length() > 0) {
        mAllApps.sendAccessibilityEvent(AccessibilityEvent.TYPE_VIEW_SELECTED);
      }
    }
  }
}

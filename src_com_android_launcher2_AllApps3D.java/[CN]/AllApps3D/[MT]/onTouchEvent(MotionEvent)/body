{
  mArrowNavigation=false;
  if (!isVisible()) {
    return true;
  }
  if (mLocks != 0) {
    return true;
  }
  super.onTouchEvent(ev);
  int x=(int)ev.getX();
  int y=(int)ev.getY();
  final boolean isPortrait=getWidth() < getHeight();
  int action=ev.getAction();
switch (action) {
case MotionEvent.ACTION_DOWN:
    if ((isPortrait && y > mTouchYBorders[mTouchYBorders.length - 1]) || (!isPortrait && x > mTouchXBorders[mTouchXBorders.length - 1])) {
      mTouchTracking=TRACKING_HOME;
      sRollo.setHomeSelected(SELECTED_PRESSED);
      mCurrentIconIndex=-1;
    }
 else {
      mTouchTracking=TRACKING_FLING;
      mMotionDownRawX=(int)ev.getRawX();
      mMotionDownRawY=(int)ev.getRawY();
      if (!sRollo.checkClickOK()) {
        sRollo.clearSelectedIcon();
      }
 else {
        mDownIconIndex=mCurrentIconIndex=sRollo.selectIcon(x,y,SELECTED_PRESSED);
        if (mDownIconIndex < 0) {
          cancelLongPress();
        }
      }
      sRollo.move(ev.getRawY() / getHeight());
      mVelocityTracker=VelocityTracker.obtain();
      mVelocityTracker.addMovement(ev);
      mStartedScrolling=false;
    }
  break;
case MotionEvent.ACTION_MOVE:
case MotionEvent.ACTION_OUTSIDE:
if (mTouchTracking == TRACKING_HOME) {
  sRollo.setHomeSelected((isPortrait && y > mTouchYBorders[mTouchYBorders.length - 1]) || (!isPortrait && x > mTouchXBorders[mTouchXBorders.length - 1]) ? SELECTED_PRESSED : SELECTED_NONE);
}
 else if (mTouchTracking == TRACKING_FLING) {
  int rawY=(int)ev.getRawY();
  int slop;
  slop=Math.abs(rawY - mMotionDownRawY);
  if (!mStartedScrolling && slop < mSlop) {
    mCurrentIconIndex=chooseTappedIcon(x,y);
    if (mDownIconIndex != mCurrentIconIndex) {
      cancelLongPress();
      mCurrentIconIndex=-1;
    }
  }
 else {
    if (!mStartedScrolling) {
      cancelLongPress();
      mCurrentIconIndex=-1;
    }
    sRollo.move(ev.getRawY() / getHeight());
    mStartedScrolling=true;
    sRollo.clearSelectedIcon();
    mVelocityTracker.addMovement(ev);
  }
}
break;
case MotionEvent.ACTION_UP:
case MotionEvent.ACTION_CANCEL:
if (mTouchTracking == TRACKING_HOME) {
if (action == MotionEvent.ACTION_UP) {
if ((isPortrait && y > mTouchYBorders[mTouchYBorders.length - 1]) || (!isPortrait && x > mTouchXBorders[mTouchXBorders.length - 1])) {
  reallyPlaySoundEffect(SoundEffectConstants.CLICK);
  mLauncher.closeAllApps(true);
}
sRollo.setHomeSelected(SELECTED_NONE);
}
mCurrentIconIndex=-1;
}
 else if (mTouchTracking == TRACKING_FLING) {
mVelocityTracker.computeCurrentVelocity(1000,mMaxFlingVelocity);
sRollo.clearSelectedIcon();
sRollo.fling(ev.getRawY() / getHeight(),mVelocityTracker.getYVelocity() / getHeight());
if (mVelocityTracker != null) {
mVelocityTracker.recycle();
mVelocityTracker=null;
}
}
mTouchTracking=TRACKING_NONE;
break;
}
return true;
}

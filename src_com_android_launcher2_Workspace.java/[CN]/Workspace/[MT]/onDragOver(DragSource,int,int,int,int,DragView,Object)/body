{
  if (!mInScrollArea) {
    CellLayout layout;
    int originX=x - xOffset;
    int originY=y - yOffset;
    boolean shrunken=mIsSmall || mIsInUnshrinkAnimation;
    if (shrunken) {
      mLastDragView=dragView;
      mLastDragOriginX=originX;
      mLastDragOriginY=originY;
      mLastDragXOffset=xOffset;
      mLastDragYOffset=yOffset;
      layout=findMatchingPageForDragOver(dragView,originX,originY,xOffset,yOffset);
      if (layout != mDragTargetLayout) {
        if (mDragTargetLayout != null) {
          mDragTargetLayout.setIsDragOverlapping(false);
          mSpringLoadedDragController.onDragExit();
        }
        mDragTargetLayout=layout;
        boolean allowDragOver=(mDragTargetLayout != null) && (mDragTargetLayout.getAcceptsDrops() || (mShrinkState == ShrinkState.SPRING_LOADED));
        if (allowDragOver) {
          mDragTargetLayout.setIsDragOverlapping(true);
          mSpringLoadedDragController.onDragEnter(mDragTargetLayout,mShrinkState == ShrinkState.SPRING_LOADED);
        }
      }
    }
 else {
      layout=getCurrentDropLayout();
      if (layout != mDragTargetLayout) {
        if (mDragTargetLayout != null) {
          mDragTargetLayout.onDragExit();
        }
        layout.onDragEnter();
        mDragTargetLayout=layout;
      }
    }
    if (!shrunken || mShrinkState == ShrinkState.SPRING_LOADED) {
      layout=getCurrentDropLayout();
      final ItemInfo item=(ItemInfo)dragInfo;
      if (dragInfo instanceof LauncherAppWidgetInfo) {
        LauncherAppWidgetInfo widgetInfo=(LauncherAppWidgetInfo)dragInfo;
        if (widgetInfo.spanX == -1) {
          int[] spans=layout.rectToCell(widgetInfo.minWidth,widgetInfo.minHeight,null);
          item.spanX=spans[0];
          item.spanY=spans[1];
        }
      }
      if (source instanceof AllAppsPagedView) {
        if (item != null && item.spanX == 1 && layout != null) {
          int dragRegionLeft=(dragView.getWidth() - layout.getCellWidth()) / 2;
          originX+=dragRegionLeft - dragView.getDragRegionLeft();
          if (dragView.getDragRegionWidth() != layout.getCellWidth()) {
            dragView.setDragRegion(dragView.getDragRegionLeft(),dragView.getDragRegionTop(),layout.getCellWidth(),dragView.getDragRegionHeight());
          }
        }
      }
 else       if (source == this) {
        final View origView=mDragInfo.cell;
        originX+=(dragView.getMeasuredWidth() - origView.getWidth()) / 2;
        originY+=(dragView.getMeasuredHeight() - origView.getHeight()) / 2 + dragView.getOffsetY();
      }
      if (mDragTargetLayout != null) {
        final View child=(mDragInfo == null) ? null : mDragInfo.cell;
        float[] localOrigin={originX,originY};
        mapPointFromSelfToChild(mDragTargetLayout,localOrigin,null);
        mDragTargetLayout.visualizeDropLocation(child,mDragOutline,(int)localOrigin[0],(int)localOrigin[1],item.spanX,item.spanY);
      }
    }
  }
}

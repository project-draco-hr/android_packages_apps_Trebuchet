{
  if (isSwitchingState())   return;
  boolean isInOverscroll=false;
  for (int i=0; i < getChildCount(); i++) {
    CellLayout cl=(CellLayout)getChildAt(i);
    if (cl != null) {
      float scrollProgress=getScrollProgress(screenCenter,cl,i);
      float rotation=WORKSPACE_ROTATION * scrollProgress;
      float translationX=getOffsetXForRotation(rotation,cl.getWidth(),cl.getHeight());
      if (!isSmall()) {
        if ((mOverScrollX < 0 && i == 0) || (mOverScrollX > mMaxScrollX && i == getChildCount() - 1)) {
          isInOverscroll=true;
          rotation*=-1;
          cl.setBackgroundAlphaMultiplier(overScrollBackgroundAlphaInterpolator(Math.abs(scrollProgress)));
          mOverScrollPageIndex=i;
          cl.setOverScrollAmount(Math.abs(scrollProgress),i == 0);
          cl.setPivotX(cl.getMeasuredWidth() * (i == 0 ? 0.75f : 0.25f));
          cl.setPivotY(cl.getMeasuredHeight() * 0.5f);
          cl.setOverscrollTransformsDirty(true);
        }
 else         if (mOverScrollPageIndex != i) {
          cl.setBackgroundAlphaMultiplier(backgroundAlphaInterpolator(Math.abs(scrollProgress)));
        }
      }
      cl.setTranslationX(translationX);
      cl.setRotationY(rotation);
      if (mFadeInAdjacentScreens && !isSmall()) {
        float alpha=1 - Math.abs(scrollProgress);
        cl.setShortcutAndWidgetAlpha(alpha);
      }
    }
  }
  if (!isSwitchingState() && !isInOverscroll) {
    ((CellLayout)getChildAt(0)).resetOverscrollTransforms();
    ((CellLayout)getChildAt(getChildCount() - 1)).resetOverscrollTransforms();
  }
  invalidate();
}

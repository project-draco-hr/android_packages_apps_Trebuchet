{
  int originX=x - xOffset;
  int originY=y - yOffset;
  if (mIsSmall || mIsInUnshrinkAnimation) {
    mTempOriginXY[0]=originX;
    mTempOriginXY[1]=originY;
    mapPointFromSelfToChild(mDragTargetLayout,mTempOriginXY);
    originX=(int)mTempOriginXY[0];
    originY=(int)mTempOriginXY[1];
  }
  if (source != this) {
    onDropExternal(originX,originY,dragInfo,mDragTargetLayout);
  }
 else   if (mDragInfo != null) {
    final View cell=mDragInfo.cell;
    CellLayout dropTargetLayout=mDragTargetLayout;
    if (dropTargetLayout == null && mInScrollArea) {
      if (mPendingScrollDirection == DragController.SCROLL_LEFT) {
        dropTargetLayout=(CellLayout)getChildAt(mCurrentPage - 1);
      }
 else       if (mPendingScrollDirection == DragController.SCROLL_RIGHT) {
        dropTargetLayout=(CellLayout)getChildAt(mCurrentPage + 1);
      }
    }
    if (dropTargetLayout != null) {
      mTargetCell=findNearestVacantArea(originX,originY,mDragInfo.spanX,mDragInfo.spanY,cell,dropTargetLayout,mTargetCell);
      final int screen=(mTargetCell == null) ? mDragInfo.screen : indexOfChild(dropTargetLayout);
      if (screen != mCurrentPage) {
        snapToPage(screen);
      }
      if (mTargetCell != null) {
        if (screen != mDragInfo.screen) {
          ((CellLayout)getChildAt(mDragInfo.screen)).removeView(cell);
          addInScreen(cell,screen,mTargetCell[0],mTargetCell[1],mDragInfo.spanX,mDragInfo.spanY);
        }
        final ItemInfo info=(ItemInfo)cell.getTag();
        CellLayout.LayoutParams lp=(CellLayout.LayoutParams)cell.getLayoutParams();
        dropTargetLayout.onMove(cell,mTargetCell[0],mTargetCell[1]);
        lp.cellX=mTargetCell[0];
        lp.cellY=mTargetCell[1];
        cell.setId(LauncherModel.getCellLayoutChildId(-1,mDragInfo.screen,mTargetCell[0],mTargetCell[1],mDragInfo.spanX,mDragInfo.spanY));
        LauncherModel.moveItemInDatabase(mLauncher,info,LauncherSettings.Favorites.CONTAINER_DESKTOP,screen,lp.cellX,lp.cellY);
      }
    }
    final CellLayout parent=(CellLayout)cell.getParent();
    setPositionForDropAnimation(dragView,originX,originY,parent,cell);
    parent.onDropChild(cell);
  }
}

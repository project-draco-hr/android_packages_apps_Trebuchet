{
  if (success) {
    if (target != this) {
      if (mDragInfo != null) {
        getParentCellLayoutForView(mDragInfo.cell).removeView(mDragInfo.cell);
        if (mDragInfo.cell instanceof DropTarget) {
          mDragController.removeDropTarget((DropTarget)mDragInfo.cell);
        }
      }
    }
  }
 else   if (mDragInfo != null) {
    doDragExit(null);
    CellLayout cellLayout;
    if (mLauncher.isHotseatLayout(target)) {
      cellLayout=mLauncher.getHotseat().getLayout();
    }
 else {
      cellLayout=(CellLayout)getChildAt(mDragInfo.screen);
    }
    cellLayout.onDropChild(mDragInfo.cell);
  }
  if (d.cancelled && mDragInfo.cell != null) {
    mDragInfo.cell.setVisibility(VISIBLE);
  }
  mDragOutline=null;
  mDragInfo=null;
  saveWorkspaceStateToDb();
  hideScrollingIndicator(false);
}

{
  ItemInfo info=(ItemInfo)dragInfo;
  View view=null;
switch (info.itemType) {
case LauncherSettings.Favorites.ITEM_TYPE_APPLICATION:
case LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT:
    if (info.container == NO_ID && info instanceof ApplicationInfo) {
      info=new ShortcutInfo((ApplicationInfo)info);
    }
  view=mLauncher.createShortcut(R.layout.application,cellLayout,(ShortcutInfo)info);
break;
case LauncherSettings.Favorites.ITEM_TYPE_USER_FOLDER:
view=FolderIcon.fromXml(R.layout.folder_icon,mLauncher,(ViewGroup)getChildAt(mCurrentPage),((UserFolderInfo)info));
break;
case LauncherSettings.Favorites.ITEM_TYPE_APPWIDGET:
cellLayout.setTagToCellInfoForPoint(x,y);
int[] position=new int[2];
position[0]=x;
position[1]=y;
mLauncher.addAppWidgetFromDrop(((LauncherAppWidgetInfo)dragInfo).providerName,cellLayout.getTag(),position);
break;
default :
throw new IllegalStateException("Unknown item type: " + info.itemType);
}
if (view == null) {
cellLayout.onDragComplete();
}
 else {
mTargetCell=estimateDropCell(x,y,1,1,view,cellLayout,mTargetCell);
addInScreen(view,indexOfChild(cellLayout),mTargetCell[0],mTargetCell[1],info.spanX,info.spanY,insertAtFirst);
cellLayout.onDropChild(view);
CellLayout.LayoutParams lp=(CellLayout.LayoutParams)view.getLayoutParams();
LauncherModel.addOrMoveItemInDatabase(mLauncher,info,LauncherSettings.Favorites.CONTAINER_DESKTOP,mCurrentPage,lp.cellX,lp.cellY);
}
}

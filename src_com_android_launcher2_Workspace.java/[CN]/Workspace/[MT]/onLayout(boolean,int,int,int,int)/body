{
  if (mFirstLayout && mCurrentPage >= 0 && mCurrentPage < getChildCount()) {
    mUpdateWallpaperOffsetImmediately=true;
  }
  super.onLayout(changed,left,top,right,bottom);
  if (mSwitchStateAfterFirstLayout) {
    mSwitchStateAfterFirstLayout=false;
    post(new Runnable(){
      public void run(){
        shrink(mStateAfterFirstLayout,false);
      }
    }
);
  }
}

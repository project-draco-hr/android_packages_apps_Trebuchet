{
  final int screenCount=getChildCount();
  if (mFirstLayout) {
    final int width=getWidth();
    for (int i=0; i < screenCount; i++) {
      getChildAt(i).setX(i * width);
    }
    mFirstLayout=false;
  }
  for (int i=0; i < screenCount; i++) {
    final View child=getChildAt(i);
    if (child.getVisibility() != View.GONE) {
      final int childX=(int)child.getX();
      final int childY=(int)child.getY();
      child.layout(childX,childY,childX + child.getMeasuredWidth(),childY + child.getMeasuredHeight());
    }
  }
  if (mWaitingToShrinkToBottom) {
    shrinkToBottom(false);
    mWaitingToShrinkToBottom=false;
  }
  if (LauncherApplication.isInPlaceRotationEnabled()) {
    setCurrentScreen(getCurrentScreen());
  }
}

{
  final int halfScreenSize=getMeasuredWidth() / 2;
  for (int i=0; i < getChildCount(); i++) {
    CellLayout cl=(CellLayout)getChildAt(i);
    if (cl != null) {
      int totalDistance=cl.getMeasuredWidth() + mPageSpacing;
      int delta=screenCenter - (getChildOffset(i) - getRelativeChildOffset(i) + halfScreenSize);
      float scrollProgress=delta / (totalDistance * 1.0f);
      scrollProgress=Math.min(scrollProgress,1.0f);
      scrollProgress=Math.max(scrollProgress,-1.0f);
      cl.setBackgroundAlphaMultiplier(Math.abs(scrollProgress));
      float rotation=WORKSPACE_ROTATION * scrollProgress;
      cl.setRotationY(rotation);
    }
  }
}

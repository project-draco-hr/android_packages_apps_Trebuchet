{
  updateWallpaperOffsets();
  if (mBackground != null && mBackgroundAlpha > 0.0f && mDrawBackground) {
    int alpha=(int)(mBackgroundAlpha * 255);
    if (mDrawCustomizeTrayBackground) {
      mCustomizationDrawer.getLocationOnScreen(mCustomizationDrawerPos);
      final Matrix m=mCustomizationDrawer.getMatrix();
      mCustomizationDrawerTransformedPos[0]=0.0f;
      mCustomizationDrawerTransformedPos[1]=mCustomizationDrawerContent.getTop();
      m.mapPoints(mCustomizationDrawerTransformedPos);
      mCustomizeTrayBackground.setAlpha(alpha);
      mCustomizeTrayBackground.setBounds(mScrollX,0,mScrollX + getMeasuredWidth(),getMeasuredHeight());
      mCustomizeTrayBackground.draw(canvas);
      final int offset=(int)(mCustomizationDrawerPos[1] + mCustomizationDrawerTransformedPos[1]);
      mBackground.setAlpha(alpha);
      mBackground.setBounds(mScrollX,offset,mScrollX + getMeasuredWidth(),offset + getMeasuredHeight());
      mBackground.draw(canvas);
    }
 else {
      mBackground.setAlpha(alpha);
      mBackground.setBounds(mScrollX,0,mScrollX + getMeasuredWidth(),getMeasuredHeight());
      mBackground.draw(canvas);
    }
  }
  for (int i=0; i < mFolderOuterRings.size(); i++) {
    FolderIcon fi=mFolderOuterRings.get(i);
    Drawable d=FolderIcon.sFolderOuterRingDrawable;
    int width=(int)(d.getIntrinsicWidth() * fi.getOuterRingScale());
    int height=(int)(d.getIntrinsicHeight() * fi.getOuterRingScale());
    fi.getFolderLocation(mTempLocation);
    int x=mTempLocation[0] + mScrollX - width / 2;
    int y=mTempLocation[1] + mScrollY - height / 2;
    d.setBounds(x,y,x + width,y + height);
    d.draw(canvas);
    d=FolderIcon.sFolderInnerRingDrawable;
    width=(int)(fi.getMeasuredWidth() * fi.getInnerRingScale());
    height=(int)(fi.getMeasuredHeight() * fi.getInnerRingScale());
    x=mTempLocation[0] + mScrollX - width / 2;
    y=mTempLocation[1] + mScrollY - height / 2;
    d.setBounds(x,y,x + width,y + height);
    d.draw(canvas);
  }
  super.onDraw(canvas);
}

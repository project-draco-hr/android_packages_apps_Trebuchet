{
  if (isFlingToDelete)   return;
  endDragging(target,false,success);
  if (!success) {
    boolean showOutOfSpaceMessage=false;
    if (target instanceof Workspace) {
      int currentScreen=mLauncher.getCurrentWorkspaceScreen();
      Workspace workspace=(Workspace)target;
      CellLayout layout=(CellLayout)workspace.getChildAt(currentScreen);
      ItemInfo itemInfo=(ItemInfo)d.dragInfo;
      if (layout != null) {
        layout.calculateSpans(itemInfo);
        showOutOfSpaceMessage=!layout.findCellForSpan(null,itemInfo.spanX,itemInfo.spanY);
      }
    }
    if (showOutOfSpaceMessage) {
      mLauncher.showOutOfSpaceMessage();
    }
    d.deferDragViewCleanupPostAnimation=false;
    cleanupWidgetPreloading();
  }
  mDraggingWidget=false;
}

{
  mDraggingWidget=true;
  ImageView image=(ImageView)v.findViewById(R.id.widget_preview);
  PendingAddItemInfo createItemInfo=(PendingAddItemInfo)v.getTag();
  Bitmap preview;
  Bitmap outline;
  if (createItemInfo instanceof PendingAddWidgetInfo) {
    PendingAddWidgetInfo createWidgetInfo=mCreateWidgetInfo;
    createItemInfo=createWidgetInfo;
    int[] spanXY=mLauncher.getSpanForWidget(createWidgetInfo,null);
    int[] size=mLauncher.getWorkspace().estimateItemSize(spanXY[0],spanXY[1],createWidgetInfo,true);
    createItemInfo.spanX=spanXY[0];
    createItemInfo.spanY=spanXY[1];
    preview=getWidgetPreview(createWidgetInfo.componentName,createWidgetInfo.previewImage,createWidgetInfo.icon,spanXY[0],spanXY[1],size[0],size[1]);
  }
 else {
    preview=Bitmap.createBitmap(mWidgetPreviewIconPaddedDimension,mWidgetPreviewIconPaddedDimension,Bitmap.Config.ARGB_8888);
    Drawable d=image.getDrawable();
    mCanvas.setBitmap(preview);
    d.draw(mCanvas);
    mCanvas.setBitmap(null);
    createItemInfo.spanX=createItemInfo.spanY=1;
  }
  Paint alphaClipPaint=null;
  if (createItemInfo instanceof PendingAddWidgetInfo) {
    if (((PendingAddWidgetInfo)createItemInfo).previewImage != 0) {
      MaskFilter alphaClipTable=TableMaskFilter.CreateClipTable(0,255);
      alphaClipPaint=new Paint();
      alphaClipPaint.setMaskFilter(alphaClipTable);
    }
  }
  outline=Bitmap.createScaledBitmap(preview,preview.getWidth(),preview.getHeight(),false);
  alphaClipPaint=null;
  mLauncher.lockScreenOrientationOnLargeUI();
  mLauncher.getWorkspace().onDragStartedWithItem(createItemInfo,outline,alphaClipPaint);
  mDragController.startDrag(image,preview,this,createItemInfo,DragController.DRAG_ACTION_COPY,null);
  outline.recycle();
  preview.recycle();
}

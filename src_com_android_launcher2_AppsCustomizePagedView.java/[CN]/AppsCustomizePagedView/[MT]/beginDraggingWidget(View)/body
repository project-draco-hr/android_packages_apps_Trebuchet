{
  ImageView image=(ImageView)v.findViewById(R.id.widget_preview);
  PendingAddItemInfo createItemInfo=(PendingAddItemInfo)v.getTag();
  Bitmap b;
  Drawable preview=image.getDrawable();
  RectF mTmpScaleRect=new RectF(0f,0f,1f,1f);
  image.getImageMatrix().mapRect(mTmpScaleRect);
  float scale=mTmpScaleRect.right;
  int w=(int)(preview.getIntrinsicWidth() * scale);
  int h=(int)(preview.getIntrinsicHeight() * scale);
  if (createItemInfo instanceof PendingAddWidgetInfo) {
    PendingAddWidgetInfo createWidgetInfo=(PendingAddWidgetInfo)createItemInfo;
    int[] spanXY=mLauncher.getSpanForWidget(createWidgetInfo,null);
    createItemInfo.spanX=spanXY[0];
    createItemInfo.spanY=spanXY[1];
    b=Bitmap.createBitmap(w,h,Bitmap.Config.ARGB_8888);
    renderDrawableToBitmap(preview,b,0,0,w,h,scale,mDragViewMultiplyColor);
  }
 else {
    b=Bitmap.createBitmap(mWidgetPreviewIconPaddedDimension,mWidgetPreviewIconPaddedDimension,Bitmap.Config.ARGB_8888);
    mCanvas.setBitmap(b);
    mCanvas.save();
    preview.draw(mCanvas);
    mCanvas.restore();
    mCanvas.drawColor(mDragViewMultiplyColor,PorterDuff.Mode.MULTIPLY);
    mCanvas.setBitmap(null);
    createItemInfo.spanX=createItemInfo.spanY=1;
  }
  Paint alphaClipPaint=null;
  if (createItemInfo instanceof PendingAddWidgetInfo) {
    if (((PendingAddWidgetInfo)createItemInfo).hasDefaultPreview) {
      MaskFilter alphaClipTable=TableMaskFilter.CreateClipTable(0,255);
      alphaClipPaint=new Paint();
      alphaClipPaint.setMaskFilter(alphaClipTable);
    }
  }
  mLauncher.lockScreenOrientationOnLargeUI();
  mLauncher.getWorkspace().onDragStartedWithItemSpans(createItemInfo.spanX,createItemInfo.spanY,b,alphaClipPaint);
  mDragController.startDrag(image,b,this,createItemInfo,DragController.DRAG_ACTION_COPY,null);
  b.recycle();
}

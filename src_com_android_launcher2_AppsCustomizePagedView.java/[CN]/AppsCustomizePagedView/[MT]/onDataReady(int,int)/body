{
  boolean isLandscape=getResources().getConfiguration().orientation == Configuration.ORIENTATION_LANDSCAPE;
  int maxCellCountX=Integer.MAX_VALUE;
  int maxCellCountY=Integer.MAX_VALUE;
  if (LauncherApplication.isScreenLarge()) {
    maxCellCountX=(isLandscape ? LauncherModel.getCellCountX() : LauncherModel.getCellCountY());
    maxCellCountY=(isLandscape ? LauncherModel.getCellCountY() : LauncherModel.getCellCountX());
  }
  mWidgetSpacingLayout.setGap(mPageLayoutWidthGap,mPageLayoutHeightGap);
  mWidgetSpacingLayout.setPadding(mPageLayoutPaddingLeft,mPageLayoutPaddingTop,mPageLayoutPaddingRight,mPageLayoutPaddingBottom);
  mWidgetSpacingLayout.calculateCellCount(width,height,maxCellCountX,maxCellCountY);
  mCellCountX=mWidgetSpacingLayout.getCellCountX();
  mCellCountY=mWidgetSpacingLayout.getCellCountY();
  mWidgetCountX=Math.max(1,(int)Math.round(mCellCountX / 2f));
  mWidgetCountY=Math.max(1,(int)Math.round(mCellCountY / 3f));
  mContentWidth=mWidgetSpacingLayout.getContentWidth();
  if (mOnSizeChangedCallback != null) {
    mOnSizeChangedCallback.run();
  }
  invalidatePageData();
}

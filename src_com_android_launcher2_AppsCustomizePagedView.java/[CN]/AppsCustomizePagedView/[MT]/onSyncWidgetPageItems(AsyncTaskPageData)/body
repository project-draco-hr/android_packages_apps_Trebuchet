{
  int page=data.page;
  PagedViewGridLayout layout=(PagedViewGridLayout)getPageAt(page);
  layout.setColumnCount(layout.getCellCountX());
  ArrayList<Object> items=data.items;
  int count=items.size();
  int cellWidth=data.cellWidth;
  int cellHeight=data.cellHeight;
  int cellCountX=data.cellCountX;
  for (int i=0; i < count; ++i) {
    Object rawInfo=items.get(i);
    PendingAddItemInfo createItemInfo=null;
    PagedViewWidget widget=(PagedViewWidget)mLayoutInflater.inflate(R.layout.apps_customize_widget,layout,false);
    if (rawInfo instanceof AppWidgetProviderInfo) {
      AppWidgetProviderInfo info=(AppWidgetProviderInfo)rawInfo;
      createItemInfo=new PendingAddWidgetInfo(info,null,null);
      int[] cellSpans=mLauncher.getSpanForWidget(info,null);
      FastBitmapDrawable preview=new FastBitmapDrawable(data.generatedImages.get(i));
      widget.applyFromAppWidgetProviderInfo(info,preview,-1,cellSpans,mHolographicOutlineHelper);
      widget.setTag(createItemInfo);
    }
 else     if (rawInfo instanceof ResolveInfo) {
      ResolveInfo info=(ResolveInfo)rawInfo;
      createItemInfo=new PendingAddItemInfo();
      createItemInfo.itemType=LauncherSettings.Favorites.ITEM_TYPE_SHORTCUT;
      createItemInfo.componentName=new ComponentName(info.activityInfo.packageName,info.activityInfo.name);
      FastBitmapDrawable preview=new FastBitmapDrawable(data.generatedImages.get(i));
      widget.applyFromResolveInfo(mPackageManager,info,preview,mHolographicOutlineHelper);
      widget.setTag(createItemInfo);
    }
    widget.setOnClickListener(this);
    widget.setOnLongClickListener(this);
    widget.setOnTouchListener(this);
    int ix=i % cellCountX;
    int iy=i / cellCountX;
    GridLayout.LayoutParams lp=new GridLayout.LayoutParams(GridLayout.spec(iy,GridLayout.LEFT),GridLayout.spec(ix,GridLayout.TOP));
    lp.width=cellWidth;
    lp.height=cellHeight;
    lp.setGravity(Gravity.TOP | Gravity.LEFT);
    if (ix > 0)     lp.leftMargin=mWidgetWidthGap;
    if (iy > 0)     lp.topMargin=mWidgetHeightGap;
    layout.addView(widget,lp);
  }
  layout.createHardwareLayer();
  invalidate();
  forceUpdateAdjacentPagesAlpha();
  if (mFadeInAdjacentScreens) {
    prepareGenerateHoloOutlinesTask(data.page,data.items,data.generatedImages);
  }
}

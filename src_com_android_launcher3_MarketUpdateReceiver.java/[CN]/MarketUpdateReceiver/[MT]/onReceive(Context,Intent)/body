{
  final String action=intent.getAction();
  String pkgName="none";
  Uri uri=intent.getData();
  if (uri != null) {
    pkgName=uri.getSchemeSpecificPart();
    ;
  }
  if (ACTION_PACKAGE_ENQUEUED.equals(action)) {
    String reason="unknown";
    if (intent.hasExtra(EXTRA_KEY_REASON)) {
      reason=intent.getStringExtra(EXTRA_KEY_REASON);
    }
    Log.d(TAG,"market has promised to " + reason + ": "+ pkgName);
  }
 else   if (ACTION_PACKAGE_DOWNLOADING.equals(action)) {
    int progress=intent.getIntExtra(EXTRA_KEY_PROGRESS,0);
    Log.d(TAG,"market is downloading (" + progress + "%): "+ pkgName);
  }
 else   if (ACTION_PACKAGE_INSTALLING.equals(action)) {
    Log.d(TAG,"market is installing: " + pkgName);
  }
 else   if (ACTION_PACKAGE_DEQUEUED.equals(action)) {
    boolean success=Activity.RESULT_OK == intent.getIntExtra(EXTRA_KEY_STATUS,Activity.RESULT_CANCELED);
    if (success) {
      Log.d(TAG,"market has installed: " + pkgName);
    }
 else {
      Log.d(TAG,"market has decided not to install: " + pkgName);
    }
  }
 else {
    Log.d(TAG,"unknown message " + action);
  }
}

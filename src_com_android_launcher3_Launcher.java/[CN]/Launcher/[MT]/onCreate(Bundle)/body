{
  if (DEBUG_STRICT_MODE) {
    StrictMode.setThreadPolicy(new StrictMode.ThreadPolicy.Builder().detectDiskReads().detectDiskWrites().detectNetwork().penaltyLog().build());
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder().detectLeakedSqlLiteObjects().detectLeakedClosableObjects().penaltyLog().penaltyDeath().build());
  }
  if (mLauncherCallbacks != null) {
    mLauncherCallbacks.preOnCreate();
  }
  super.onCreate(savedInstanceState);
  LauncherAppState.setApplicationContext(getApplicationContext());
  LauncherAppState app=LauncherAppState.getInstance();
  LauncherAppState.getLauncherProvider().setLauncherProviderChangeListener(this);
  DeviceProfile grid=app.initDynamicGrid(this);
  mSharedPrefs=getSharedPreferences(LauncherAppState.getSharedPreferencesKey(),Context.MODE_PRIVATE);
  mIsSafeModeEnabled=getPackageManager().isSafeMode();
  mModel=app.setLauncher(this);
  mIconCache=app.getIconCache();
  mIconCache.flushInvalidIcons(grid);
  mDragController=new DragController(this);
  mInflater=getLayoutInflater();
  mStats=new Stats(this);
  mAppWidgetManager=AppWidgetManagerCompat.getInstance(this);
  mAppWidgetHost=new LauncherAppWidgetHost(this,APPWIDGET_HOST_ID);
  mAppWidgetHost.startListening();
  mPaused=false;
  if (PROFILE_STARTUP) {
    android.os.Debug.startMethodTracing(Environment.getExternalStorageDirectory() + "/launcher");
  }
  checkForLocaleChange();
  setContentView(R.layout.launcher);
  setupViews();
  grid.layout(this);
  registerContentObservers();
  lockAllApps();
  mSavedState=savedInstanceState;
  restoreState(mSavedState);
  if (PROFILE_STARTUP) {
    android.os.Debug.stopMethodTracing();
  }
  if (!mRestoring) {
    if (DISABLE_SYNCHRONOUS_BINDING_CURRENT_PAGE) {
      mModel.startLoader(true,PagedView.INVALID_RESTORE_PAGE);
    }
 else {
      mModel.startLoader(true,mWorkspace.getRestorePage());
    }
  }
  mDefaultKeySsb=new SpannableStringBuilder();
  Selection.setSelection(mDefaultKeySsb,0);
  IntentFilter filter=new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
  registerReceiver(mCloseSystemDialogsReceiver,filter);
  updateGlobalIcons();
  unlockScreenOrientation(true);
  if (shouldShowIntroScreen()) {
    showIntroScreen();
  }
 else {
    showFirstRunActivity();
    showFirstRunClings();
  }
  if (mLauncherCallbacks != null) {
    mLauncherCallbacks.onCreate(savedInstanceState);
    if (mLauncherCallbacks.hasLauncherOverlay()) {
      ViewStub stub=(ViewStub)findViewById(R.id.launcher_overlay_stub);
      mLauncherOverlayContainer=(InsettableFrameLayout)stub.inflate();
      mLauncherOverlay=mLauncherCallbacks.setLauncherOverlayView(mLauncherOverlayContainer,mLauncherOverlayCallbacks);
      mWorkspace.setLauncherOverlay(mLauncherOverlay);
    }
  }
}

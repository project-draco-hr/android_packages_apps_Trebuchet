{
  super.onDestroy();
  if (mPreferenceObserverRegistered) {
    getSharedPreferences(LauncherFiles.ROTATION_PREF_FILE,Context.MODE_MULTI_PROCESS).unregisterOnSharedPreferenceChangeListener(mSettingsObserver);
    mPreferenceObserverRegistered=false;
  }
  mHandler.removeMessages(ADVANCE_MSG);
  mHandler.removeMessages(0);
  mWorkspace.removeCallbacks(mBuildLayersRunnable);
  LauncherAppState app=(LauncherAppState.getInstance());
  if (mModel.isCurrentCallbacks(this)) {
    mModel.stopLoader();
    app.setLauncher(null);
  }
  try {
    mAppWidgetHost.stopListening();
  }
 catch (  NullPointerException ex) {
    Log.w(TAG,"problem while stopping AppWidgetHost during Launcher destruction",ex);
  }
  mAppWidgetHost=null;
  mWidgetsToAdvance.clear();
  TextKeyListener.getInstance().release();
  getContentResolver().unregisterContentObserver(mWidgetObserver);
  unregisterReceiver(mCloseSystemDialogsReceiver);
  mDragLayer.clearAllResizeFrames();
  ((ViewGroup)mWorkspace.getParent()).removeAllViews();
  mWorkspace.removeAllWorkspaceScreens();
  mWorkspace=null;
  mDragController=null;
  LauncherAnimUtils.onDestroyActivity();
  if (mLauncherCallbacks != null) {
    mLauncherCallbacks.onDestroy();
  }
}

{
  if (mState != State.WORKSPACE)   return;
  if (toState != State.APPS && toState != State.WIDGETS)   return;
  if (toState == State.APPS) {
    mStateTransitionAnimation.startAnimationToAllApps(animated);
    if (!Launcher.DISABLE_ALL_APPS_SEARCH_INTEGRATION && mLauncherCallbacks != null) {
      mLauncherCallbacks.onAllAppsShown();
    }
  }
 else {
    mStateTransitionAnimation.startAnimationToWidgets(animated);
  }
  mState=toState;
  mUserPresent=false;
  updateAutoAdvanceState();
  closeFolder();
  getWindow().getDecorView().sendAccessibilityEvent(AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED);
}

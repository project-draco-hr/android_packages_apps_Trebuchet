{
  if (isWorkspaceLocked()) {
    return false;
  }
  super.onCreateOptionsMenu(menu);
  Intent manageApps=new Intent(Settings.ACTION_MANAGE_ALL_APPLICATIONS_SETTINGS);
  manageApps.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
  Intent settings=new Intent(android.provider.Settings.ACTION_SETTINGS);
  settings.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_RESET_TASK_IF_NEEDED);
  String helpUrl=getString(R.string.help_url);
  Intent help=new Intent(Intent.ACTION_VIEW,Uri.parse(helpUrl));
  help.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK | Intent.FLAG_ACTIVITY_EXCLUDE_FROM_RECENTS);
  menu.add(MENU_GROUP_WALLPAPER,MENU_WALLPAPER_SETTINGS,0,R.string.menu_wallpaper).setIcon(android.R.drawable.ic_menu_gallery).setAlphabeticShortcut('W');
  menu.add(0,MENU_MANAGE_APPS,0,R.string.menu_manage_apps).setIcon(android.R.drawable.ic_menu_manage).setIntent(manageApps).setAlphabeticShortcut('M');
  menu.add(0,MENU_SYSTEM_SETTINGS,0,R.string.menu_settings).setIcon(android.R.drawable.ic_menu_preferences).setIntent(settings).setAlphabeticShortcut('P');
  if (!helpUrl.isEmpty()) {
    menu.add(0,MENU_HELP,0,R.string.menu_help).setIcon(android.R.drawable.ic_menu_help).setIntent(help).setAlphabeticShortcut('H');
  }
  return true;
}

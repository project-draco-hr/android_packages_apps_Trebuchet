{
  if (waitUntilResume(new Runnable(){
    public void run(){
      finishBindingItems(upgradePath);
    }
  }
)) {
    return;
  }
  if (mSavedState != null) {
    if (!mWorkspace.hasFocus()) {
      mWorkspace.getChildAt(mWorkspace.getCurrentPage()).requestFocus();
    }
    mSavedState=null;
  }
  if (!mWorkspace.hasCustomContent() && hasCustomContentToLeft()) {
    mWorkspace.createCustomContentPage();
  }
  mWorkspace.restoreInstanceStateForRemainingPages();
  for (int i=0; i < sPendingAddList.size(); i++) {
    completeAdd(sPendingAddList.get(i));
  }
  sPendingAddList.clear();
  updateAppMarketIcon();
  if (mVisible || mWorkspaceLoading) {
    Runnable newAppsRunnable=new Runnable(){
      @Override public void run(){
        runNewAppsAnimation(false);
      }
    }
;
    boolean willSnapPage=mNewShortcutAnimateScreenId > -1 && mNewShortcutAnimateScreenId != mWorkspace.getCurrentPage();
    if (canRunNewAppsAnimation()) {
      if (willSnapPage) {
        mWorkspace.snapToScreenId(mNewShortcutAnimateScreenId,newAppsRunnable);
      }
 else {
        runNewAppsAnimation(false);
      }
    }
 else {
      runNewAppsAnimation(willSnapPage);
    }
  }
  mWorkspaceLoading=false;
  if (upgradePath) {
    mWorkspace.stripDuplicateApps();
    mIntentsOnWorkspaceFromUpgradePath=mWorkspace.stripDuplicateApps();
  }
  mWorkspace.post(new Runnable(){
    @Override public void run(){
      onFinishBindingItems();
    }
  }
);
}

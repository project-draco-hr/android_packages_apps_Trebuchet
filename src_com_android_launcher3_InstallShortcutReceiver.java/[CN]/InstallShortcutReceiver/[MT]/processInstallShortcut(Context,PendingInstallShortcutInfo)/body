{
  String spKey=LauncherAppState.getSharedPreferencesKey();
  SharedPreferences sp=context.getSharedPreferences(spKey,Context.MODE_PRIVATE);
  final Intent data=pendingInfo.data;
  final Intent intent=pendingInfo.launchIntent;
  final String name=pendingInfo.name;
  LauncherAppState app=LauncherAppState.getInstance();
  final int[] result={INSTALL_SHORTCUT_SUCCESSFUL};
  boolean found=false;
synchronized (app) {
    app.getModel().flushWorkerThread();
    final ArrayList<ItemInfo> items=LauncherModel.getItemsInLocalCoordinates(context);
    final boolean exists=LauncherModel.shortcutExists(context,name,intent);
    final int screen=Launcher.DEFAULT_SCREEN;
    for (int i=0; i < Launcher.SCREEN_COUNT; i++) {
      int si=i;
      if (0 <= si && si < Launcher.SCREEN_COUNT) {
        found=installShortcut(context,data,items,name,intent,si,exists,sp,result);
      }
    }
  }
  if (!found) {
    if (result[0] == INSTALL_SHORTCUT_NO_SPACE) {
      Toast.makeText(context,context.getString(R.string.completely_out_of_space),Toast.LENGTH_SHORT).show();
    }
 else     if (result[0] == INSTALL_SHORTCUT_IS_DUPLICATE) {
      Toast.makeText(context,context.getString(R.string.shortcut_duplicate,name),Toast.LENGTH_SHORT).show();
    }
  }
}

{
  if (!ACTION_INSTALL_SHORTCUT.equals(data.getAction())) {
    return;
  }
  Intent intent=data.getParcelableExtra(Intent.EXTRA_SHORTCUT_INTENT);
  if (intent == null) {
    return;
  }
  String name=data.getStringExtra(Intent.EXTRA_SHORTCUT_NAME);
  if (name == null) {
    try {
      PackageManager pm=context.getPackageManager();
      ActivityInfo info=pm.getActivityInfo(intent.getComponent(),0);
      name=info.loadLabel(pm).toString();
    }
 catch (    PackageManager.NameNotFoundException nnfe) {
      return;
    }
  }
  Bitmap icon=data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON);
  Intent.ShortcutIconResource iconResource=data.getParcelableExtra(Intent.EXTRA_SHORTCUT_ICON_RESOURCE);
  LauncherAppState.setApplicationContext(context.getApplicationContext());
  LauncherAppState app=LauncherAppState.getInstance();
  boolean launcherNotLoaded=(app.getDynamicGrid() == null);
  PendingInstallShortcutInfo info=new PendingInstallShortcutInfo(data,name,intent);
  info.icon=icon;
  info.iconResource=iconResource;
  String spKey=LauncherAppState.getSharedPreferencesKey();
  SharedPreferences sp=context.getSharedPreferences(spKey,Context.MODE_PRIVATE);
  addToInstallQueue(sp,info);
  if (!mUseInstallQueue && !launcherNotLoaded) {
    flushInstallQueue(context);
  }
}

{
  if (packageNames.isEmpty()) {
    return;
  }
synchronized (sLock) {
    Set<String> strings=sharedPrefs.getStringSet(APPS_PENDING_INSTALL,null);
    if (DBG) {
      Log.d(TAG,"APPS_PENDING_INSTALL: " + strings + ", removing packages: "+ packageNames);
    }
    if (strings != null) {
      Set<String> newStrings=new HashSet<String>(strings);
      Iterator<String> newStringsIter=newStrings.iterator();
      while (newStringsIter.hasNext()) {
        String json=newStringsIter.next();
        try {
          JSONObject object=(JSONObject)new JSONTokener(json).nextValue();
          Intent launchIntent=Intent.parseUri(object.getString(LAUNCH_INTENT_KEY),0);
          String pn=launchIntent.getPackage();
          if (pn == null) {
            if (launchIntent.getComponent() == null) {
              continue;
            }
            pn=launchIntent.getComponent().getPackageName();
          }
          if (packageNames.contains(pn)) {
            newStringsIter.remove();
          }
        }
 catch (        org.json.JSONException e) {
          Log.d(TAG,"Exception reading shortcut to remove: " + e);
        }
catch (        java.net.URISyntaxException e) {
          Log.d(TAG,"Exception reading shortcut to remove: " + e);
        }
      }
      sharedPrefs.edit().putStringSet(APPS_PENDING_INSTALL,new HashSet<String>(newStrings)).commit();
    }
  }
}

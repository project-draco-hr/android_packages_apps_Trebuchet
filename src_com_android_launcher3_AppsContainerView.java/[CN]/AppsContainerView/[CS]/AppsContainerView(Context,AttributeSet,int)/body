{
  super(context,attrs,defStyleAttr);
  LauncherAppState app=LauncherAppState.getInstance();
  DeviceProfile grid=app.getDynamicGrid().getDeviceProfile();
  Resources res=context.getResources();
  mContainerInset=context.getResources().getDimensionPixelSize(R.dimen.apps_container_inset);
  mFixedBoundsContainerInset=context.getResources().getDimensionPixelSize(R.dimen.apps_container_fixed_bounds_inset);
  mLauncher=(Launcher)context;
  mApps=new AlphabeticalAppsList(context);
  if (USE_LAYOUT == GRID_LAYOUT) {
    mNumAppsPerRow=grid.appsViewNumCols;
    AppsGridAdapter adapter=new AppsGridAdapter(context,mApps,mNumAppsPerRow,this,mLauncher,this);
    adapter.setEmptySearchText(res.getString(R.string.loading_apps_message));
    mLayoutManager=adapter.getLayoutManager(context);
    mItemDecoration=adapter.getItemDecoration();
    mAdapter=adapter;
    mContentMarginStart=adapter.getContentMarginStart();
  }
 else   if (USE_LAYOUT == LIST_LAYOUT) {
    mNumAppsPerRow=1;
    AppsListAdapter adapter=new AppsListAdapter(context,mApps,this,mLauncher,this);
    adapter.setEmptySearchText(res.getString(R.string.loading_apps_message));
    mLayoutManager=adapter.getLayoutManager(context);
    mAdapter=adapter;
  }
  mApps.setAdapter(mAdapter);
}

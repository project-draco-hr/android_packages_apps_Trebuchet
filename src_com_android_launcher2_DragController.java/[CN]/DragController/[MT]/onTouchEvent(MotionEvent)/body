{
  if (!mDragging) {
    return false;
  }
  final int action=ev.getAction();
  final int screenX=clamp((int)ev.getRawX(),0,mDisplayMetrics.widthPixels);
  final int screenY=clamp((int)ev.getRawY(),0,mDisplayMetrics.heightPixels);
switch (action) {
case MotionEvent.ACTION_DOWN:
    mMotionDownX=screenX;
  mMotionDownY=screenY;
if ((screenX < mScrollZone) || (screenX > mScrollView.getWidth() - mScrollZone)) {
  mScrollState=SCROLL_WAITING_IN_ZONE;
  mHandler.postDelayed(mScrollRunnable,SCROLL_DELAY);
}
 else {
  mScrollState=SCROLL_OUTSIDE_ZONE;
}
break;
case MotionEvent.ACTION_MOVE:
handleMoveEvent(screenX,screenY);
break;
case MotionEvent.ACTION_UP:
mHandler.removeCallbacks(mScrollRunnable);
if (mDragging) {
drop(screenX,screenY);
}
endDrag();
break;
case MotionEvent.ACTION_CANCEL:
cancelDrag();
break;
}
return true;
}

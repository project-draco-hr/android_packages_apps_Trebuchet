{
  if (mLocked || !mLauncher.isDrawerDown()) {
    return true;
  }
  final int action=ev.getAction();
  if ((action == MotionEvent.ACTION_MOVE) && (mTouchState != TOUCH_STATE_REST)) {
    return true;
  }
  final float x=ev.getX();
  final float y=ev.getY();
switch (action) {
case MotionEvent.ACTION_MOVE:
    final int xDiff=(int)Math.abs(x - mLastMotionX);
  final int yDiff=(int)Math.abs(y - mLastMotionY);
final int touchSlop=ViewConfiguration.getTouchSlop();
boolean xMoved=xDiff > touchSlop;
boolean yMoved=yDiff > touchSlop;
if (xMoved || yMoved) {
if (xMoved) {
mTouchState=TOUCH_STATE_SCROLLING;
enableChildrenCache();
}
if (mAllowLongPress) {
mAllowLongPress=false;
final View currentScreen=getChildAt(mCurrentScreen);
currentScreen.cancelLongPress();
}
}
break;
case MotionEvent.ACTION_DOWN:
mLastMotionX=x;
mLastMotionY=y;
mAllowLongPress=true;
mTouchState=mScroller.isFinished() ? TOUCH_STATE_REST : TOUCH_STATE_SCROLLING;
break;
case MotionEvent.ACTION_CANCEL:
case MotionEvent.ACTION_UP:
clearChildrenCache();
mTouchState=TOUCH_STATE_REST;
break;
}
return mTouchState != TOUCH_STATE_REST;
}

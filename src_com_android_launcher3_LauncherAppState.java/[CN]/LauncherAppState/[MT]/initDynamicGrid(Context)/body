{
  WindowManager wm=(WindowManager)context.getSystemService(Context.WINDOW_SERVICE);
  Display display=wm.getDefaultDisplay();
  Point realSize=new Point();
  display.getRealSize(realSize);
  DisplayMetrics dm=new DisplayMetrics();
  display.getMetrics(dm);
  if (mDynamicGrid == null) {
    Point smallestSize=new Point();
    Point largestSize=new Point();
    display.getCurrentSizeRange(smallestSize,largestSize);
    mDynamicGrid=new DynamicGrid(context,context.getResources(),Math.min(smallestSize.x,smallestSize.y),Math.min(largestSize.x,largestSize.y),realSize.x,realSize.y,dm.widthPixels,dm.heightPixels);
    mDynamicGrid.getDeviceProfile().addCallback(this);
  }
  DeviceProfile grid=mDynamicGrid.getDeviceProfile();
  grid.updateFromConfiguration(context,context.getResources(),realSize.x,realSize.y,dm.widthPixels,dm.heightPixels);
  return grid;
}

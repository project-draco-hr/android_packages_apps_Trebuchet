{
  List<ResolveInfo> list=packageManager.queryIntentActivities(intent,PackageManager.MATCH_DEFAULT_ONLY);
  if (list != null) {
    int count=list.size();
    if (count > 1) {
      ResolveInfo firstInfo=list.get(0);
      for (int i=1; i < count; i++) {
        ResolveInfo resolveInfo=list.get(i);
        if (firstInfo.priority != resolveInfo.priority || firstInfo.isDefault != resolveInfo.isDefault) {
          while (i < count) {
            list.remove(i);
            count--;
          }
        }
      }
      Collections.sort(list,new ResolveInfo.DisplayNameComparator(packageManager));
    }
  }
  return list;
}

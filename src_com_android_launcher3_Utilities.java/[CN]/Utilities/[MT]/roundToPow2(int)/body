{
  int orig=n;
  n>>=1;
  int mask=0x8000000;
  while (mask != 0 && (n & mask) == 0) {
    mask>>=1;
  }
  while (mask != 0) {
    n|=mask;
    mask>>=1;
  }
  n+=1;
  if (n != orig) {
    n<<=1;
  }
  return n;
}

{
  float valueLeading=0;
  if (leading > 0) {
    if (current < leading) {
      if (current > 0) {
        valueLeading=1f - current / leading;
      }
 else       if (mActive && mExtendsBeyondEdges) {
        valueLeading=1f;
      }
    }
  }
 else   if (leading < 0) {
    if (current < 0) {
      valueLeading=current / leading;
    }
  }
  float valueTrailing=0;
  if (trailing > 0) {
    if (current > size - trailing) {
      if (current < size) {
        valueTrailing=1f - (size - current) / trailing;
      }
 else       if (mActive && mExtendsBeyondEdges) {
        valueTrailing=1f;
      }
    }
  }
 else   if (trailing < 0) {
    if (current > size) {
      valueTrailing=(size - current) / trailing;
    }
  }
  float value=(valueTrailing - valueLeading);
  if ((value > mFastScrollingRange || value < -mFastScrollingRange) && mScrollStart[dir] == 0) {
    mScrollStart[dir]=ev.getEventTime();
  }
 else {
    mScrollStart[dir]=0;
  }
  final float duration=(ev.getEventTime() - mScrollStart[dir]) / mDurationToMax;
  final float interpolated;
  if (value < 0) {
    if (value < -mFastScrollingRange) {
      value+=mEdgeInterpolator.getInterpolation(-duration);
    }
    interpolated=mEdgeInterpolator == null ? -1 : -mEdgeInterpolator.getInterpolation(-value);
  }
 else   if (value > 0) {
    if (value > mFastScrollingRange) {
      value+=mEdgeInterpolator.getInterpolation(duration);
    }
    interpolated=mEdgeInterpolator == null ? 1 : mEdgeInterpolator.getInterpolation(value);
  }
 else {
    mScrollStart[dir]=0;
    return 0;
  }
  return constrain(interpolated,-1,1);
}

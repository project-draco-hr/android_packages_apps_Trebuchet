{
  int halfScreenSize=getMeasuredWidth() / 2;
  int screenCenter=mScrollX + halfScreenSize;
  if (screenCenter != mLastScreenCenter) {
    screenScrolled(screenCenter);
    updateAdjacentPagesAlpha();
    mLastScreenCenter=screenCenter;
  }
  final int pageCount=getChildCount();
  if (pageCount > 0) {
    getVisiblePages(mTempVisiblePagesRange);
    final int leftScreen=mTempVisiblePagesRange[0];
    final int rightScreen=mTempVisiblePagesRange[1];
    final long drawingTime=getDrawingTime();
    canvas.save();
    canvas.clipRect(mScrollX,mScrollY,mScrollX + mRight - mLeft,mScrollY + mBottom - mTop);
    for (int i=rightScreen; i >= leftScreen; i--) {
      drawChild(canvas,getPageAt(i),drawingTime);
    }
    canvas.restore();
  }
}

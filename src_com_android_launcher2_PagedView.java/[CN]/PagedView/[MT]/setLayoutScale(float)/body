{
  mLayoutScale=childrenScale;
  invalidateCachedOffsets();
  int childCount=getChildCount();
  float childrenX[]=new float[childCount];
  float childrenY[]=new float[childCount];
  for (int i=0; i < childCount; i++) {
    final View child=getPageAt(i);
    childrenX[i]=child.getX();
    childrenY[i]=child.getY();
  }
  int widthSpec=MeasureSpec.makeMeasureSpec(getMeasuredWidth(),MeasureSpec.EXACTLY);
  int heightSpec=MeasureSpec.makeMeasureSpec(getMeasuredHeight(),MeasureSpec.EXACTLY);
  requestLayout();
  measure(widthSpec,heightSpec);
  layout(getLeft(),getTop(),getRight(),getBottom());
  for (int i=0; i < childCount; i++) {
    final View child=getPageAt(i);
    child.setX(childrenX[i]);
    child.setY(childrenY[i]);
  }
  scrollToNewPageWithoutMovingPages(mCurrentPage);
}

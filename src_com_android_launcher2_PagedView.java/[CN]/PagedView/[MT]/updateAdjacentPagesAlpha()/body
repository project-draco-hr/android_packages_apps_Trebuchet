{
  if (mFadeInAdjacentScreens) {
    if (mDirtyPageAlpha || (mTouchState == TOUCH_STATE_SCROLLING) || !mScroller.isFinished()) {
      int halfScreenSize=getMeasuredWidth() / 2;
      int screenCenter=mScrollX + halfScreenSize;
      final int childCount=getChildCount();
      for (int i=0; i < childCount; ++i) {
        View layout=(View)getChildAt(i);
        int childWidth=layout.getMeasuredWidth();
        int halfChildWidth=(childWidth / 2);
        int childCenter=getChildOffset(i) + halfChildWidth;
        int d=halfChildWidth;
        int distanceFromScreenCenter=childCenter - screenCenter;
        if (distanceFromScreenCenter > 0) {
          if (i > 0) {
            d+=getChildAt(i - 1).getMeasuredWidth() / 2;
          }
        }
 else {
          if (i < childCount - 1) {
            d+=getChildAt(i + 1).getMeasuredWidth() / 2;
          }
        }
        float dimAlpha=(float)(Math.abs(distanceFromScreenCenter)) / d;
        dimAlpha=Math.max(0.0f,Math.min(1.0f,(dimAlpha * dimAlpha)));
        float alpha=1.0f - dimAlpha;
        if (alpha < ALPHA_QUANTIZE_LEVEL) {
          alpha=0.0f;
        }
 else         if (alpha > 1.0f - ALPHA_QUANTIZE_LEVEL) {
          alpha=1.0f;
        }
        if (Float.compare(alpha,layout.getAlpha()) != 0) {
          layout.setAlpha(alpha);
        }
      }
      mDirtyPageAlpha=false;
    }
  }
}

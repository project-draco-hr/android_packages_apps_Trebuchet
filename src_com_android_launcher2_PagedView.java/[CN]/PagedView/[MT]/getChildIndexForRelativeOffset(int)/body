{
  final boolean isRtl=isLayoutRtl();
  final int childCount=getChildCount();
  int left;
  int right;
  final int startIndex=isRtl ? childCount - 1 : 0;
  final int endIndex=isRtl ? -1 : childCount;
  final int delta=isRtl ? -1 : 1;
  for (int i=startIndex; i != endIndex; i+=delta) {
    left=getRelativeChildOffset(i);
    right=(left + getScaledMeasuredWidth(getPageAt(i)));
    if (left <= relativeOffset && relativeOffset <= right) {
      return i;
    }
  }
  return -1;
}

{
  boolean delayExitSpringLoadedMode=false;
  mWaitingForResult=false;
  if (resultCode == RESULT_OK && mAddScreen != -1) {
    final PendingAddArguments args=new PendingAddArguments();
    args.requestCode=requestCode;
    args.intent=data;
    args.screen=mAddScreen;
    args.cellX=mAddCellX;
    args.cellY=mAddCellY;
    if (isWorkspaceLocked()) {
      sPendingAddList.add(args);
    }
 else {
      delayExitSpringLoadedMode=completeAdd(args);
    }
  }
 else   if ((requestCode == REQUEST_PICK_APPWIDGET || requestCode == REQUEST_CREATE_APPWIDGET) && resultCode == RESULT_CANCELED) {
    if (data != null) {
      int appWidgetId=data.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,-1);
      if (appWidgetId != -1) {
        mAppWidgetHost.deleteAppWidgetId(appWidgetId);
      }
    }
  }
  exitSpringLoadedDragModeDelayed(delayExitSpringLoadedMode);
}

{
  boolean delayExitSpringLoadedMode=false;
  mWaitingForResult=false;
  if (resultCode == RESULT_OK && mPendingAddInfo.container != ItemInfo.NO_ID) {
    final PendingAddArguments args=new PendingAddArguments();
    args.requestCode=requestCode;
    args.intent=data;
    args.container=mPendingAddInfo.container;
    args.screen=mPendingAddInfo.screen;
    args.cellX=mPendingAddInfo.cellX;
    args.cellY=mPendingAddInfo.cellY;
    if (isWorkspaceLocked()) {
      sPendingAddList.add(args);
    }
 else {
      delayExitSpringLoadedMode=completeAdd(args);
    }
  }
 else   if ((requestCode == REQUEST_PICK_APPWIDGET || requestCode == REQUEST_CREATE_APPWIDGET) && resultCode == RESULT_CANCELED) {
    if (data != null) {
      int appWidgetId=data.getIntExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,-1);
      if (appWidgetId != -1) {
        mAppWidgetHost.deleteAppWidgetId(appWidgetId);
      }
    }
  }
  exitSpringLoadedDragModeDelayed((resultCode != RESULT_CANCELED),delayExitSpringLoadedMode);
}

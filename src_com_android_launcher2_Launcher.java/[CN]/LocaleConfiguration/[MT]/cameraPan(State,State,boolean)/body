{
  final Resources res=getResources();
  final int duration=res.getInteger(R.integer.config_allAppsCameraPanTime);
  final int workspaceHeight=mWorkspace.getHeight();
  final boolean fromAllApps=(fromState == State.ALL_APPS);
  final View fromView=fromAllApps ? (View)mAllAppsGrid : mHomeCustomizationDrawer;
  final View toView=fromAllApps ? mHomeCustomizationDrawer : (View)mAllAppsGrid;
  final float fromViewStartY=fromAllApps ? 0.0f : fromView.getY();
  final float fromViewEndY=fromAllApps ? -fromView.getHeight() * 2 : workspaceHeight * 2;
  final float toViewStartY=fromAllApps ? workspaceHeight * 2 : -toView.getHeight() * 2;
  final float toViewEndY=fromAllApps ? workspaceHeight - toView.getHeight() : 0.0f;
  mCustomizePagedView.endChoiceMode();
  mAllAppsPagedView.endChoiceMode();
  if (toState == State.ALL_APPS) {
    mWorkspace.shrinkToBottom(animated);
  }
 else {
    mWorkspace.shrinkToTop(animated);
  }
  if (animated) {
    AnimatorSet s=new AnimatorSet();
    s.addListener(new AnimatorListenerAdapter(){
      public void onAnimationStart(      Animator animation){
        toView.setVisibility(View.VISIBLE);
        toView.setY(toViewStartY);
      }
      public void onAnimationEnd(      Animator animation){
        fromView.setVisibility(View.GONE);
      }
    }
);
    AnimatorSet toolbarHideAnim=new AnimatorSet();
    AnimatorSet toolbarShowAnim=new AnimatorSet();
    hideAndShowToolbarButtons(toState,toolbarShowAnim,toolbarHideAnim);
    s.playTogether(toolbarHideAnim,new ObjectAnimator(duration,fromView,"y",fromViewStartY,fromViewEndY),new ObjectAnimator(duration,toView,"y",toViewStartY,toViewEndY));
    final int fadeInTime=res.getInteger(R.integer.config_toolbarButtonFadeInTime);
    s.play(toolbarShowAnim).after(duration - fadeInTime);
    s.start();
  }
 else {
    fromView.setY(fromViewEndY);
    fromView.setVisibility(View.GONE);
    toView.setY(toViewEndY);
    toView.setVisibility(View.VISIBLE);
    hideAndShowToolbarButtons(toState,null,null);
  }
}

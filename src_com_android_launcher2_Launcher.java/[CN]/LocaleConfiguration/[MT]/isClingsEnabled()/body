{
  if (ActivityManager.isRunningInTestHarness())   return false;
  boolean supportsLimitedUsers=android.os.Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.JELLY_BEAN_MR2;
  if (supportsLimitedUsers) {
    final UserManager um=(UserManager)getSystemService(Context.USER_SERVICE);
    if (um.isUserLimited())     return false;
  }
  return true;
}

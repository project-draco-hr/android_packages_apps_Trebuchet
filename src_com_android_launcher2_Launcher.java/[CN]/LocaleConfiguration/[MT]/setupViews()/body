{
  final DragController dragController=mDragController;
  mDragLayer=(DragLayer)findViewById(R.id.drag_layer);
  mWorkspace=(Workspace)mDragLayer.findViewById(R.id.workspace);
  mDragLayer.setup(this,dragController);
  mWorkspace.setHapticFeedbackEnabled(false);
  mWorkspace.setOnLongClickListener(this);
  mWorkspace.setup(this,dragController);
  mWorkspace.setWallpaperDimension();
  mSearchDeleteBar=(SearchDropTargetBar)mDragLayer.findViewById(R.id.qsb_bar);
  mAppsCustomizeTabHost=(AppsCustomizeTabHost)findViewById(R.id.apps_customize_pane);
  mAppsCustomizeContent=(AppsCustomizePagedView)mAppsCustomizeTabHost.findViewById(R.id.apps_customize_pane_content);
  mAppsCustomizeContent.setup(this,dragController);
  mAllAppsButton=mDragLayer.findViewById(R.id.all_apps_button);
  mAllAppsButton.setOnClickListener(new OnClickListener(){
    public void onClick(    View v){
      onClickAllAppsButton(v);
    }
  }
);
  if (!LauncherApplication.isScreenLarge()) {
    HandleView handleView=(HandleView)mAllAppsButton;
    handleView.setLauncher(this);
    handleView.setOnLongClickListener(this);
    ImageView hotseatLeft=(ImageView)findViewById(R.id.hotseat_left);
    hotseatLeft.setContentDescription(mHotseatLabels[0]);
    hotseatLeft.setImageDrawable(mHotseatIcons[0]);
    ImageView hotseatRight=(ImageView)findViewById(R.id.hotseat_right);
    hotseatRight.setContentDescription(mHotseatLabels[1]);
    hotseatRight.setImageDrawable(mHotseatIcons[1]);
    View.OnKeyListener listener=new IndicatorKeyEventListener();
    mPreviousView=(ImageView)mDragLayer.findViewById(R.id.previous_screen);
    mPreviousView.setOnKeyListener(listener);
    mNextView=(ImageView)mDragLayer.findViewById(R.id.next_screen);
    mNextView.setOnKeyListener(listener);
    Drawable previous=mPreviousView.getDrawable();
    Drawable next=mNextView.getDrawable();
    mWorkspace.setIndicators(previous,next);
    mPreviousView.setHapticFeedbackEnabled(false);
    mPreviousView.setOnLongClickListener(this);
    mNextView.setHapticFeedbackEnabled(false);
    mNextView.setOnLongClickListener(this);
  }
  if (!LauncherApplication.isScreenLarge()) {
    mButtonCluster=(ViewGroup)findViewById(R.id.all_apps_button_cluster);
    View.OnKeyListener listener=null;
    if (LauncherApplication.isScreenLarge()) {
      listener=new ButtonBarKeyEventListener();
    }
 else {
      listener=new DockKeyEventListener();
    }
    int buttonCount=mButtonCluster.getChildCount();
    for (int i=0; i < buttonCount; ++i) {
      mButtonCluster.getChildAt(i).setOnKeyListener(listener);
    }
  }
  dragController.setDragScoller(mWorkspace);
  dragController.setScrollView(mDragLayer);
  dragController.setMoveTarget(mWorkspace);
  dragController.addDropTarget(mWorkspace);
  if (mSearchDeleteBar != null) {
    mSearchDeleteBar.setup(this,dragController);
  }
}

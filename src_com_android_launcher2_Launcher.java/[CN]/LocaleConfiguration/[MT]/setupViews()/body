{
  final DragController dragController=mDragController;
  DragLayer dragLayer=(DragLayer)findViewById(R.id.drag_layer);
  dragLayer.setDragController(dragController);
  mAllAppsGrid=(AllAppsView)dragLayer.findViewById(R.id.all_apps_view);
  mAllAppsGrid.setLauncher(this);
  mAllAppsGrid.setDragController(dragController);
  ((View)mAllAppsGrid).setWillNotDraw(false);
  ((View)mAllAppsGrid).setFocusable(false);
  if (LauncherApplication.isScreenXLarge()) {
    ((View)mAllAppsGrid).setVisibility(View.INVISIBLE);
    mHomeCustomizationDrawer.setVisibility(View.INVISIBLE);
  }
  mWorkspace=(Workspace)dragLayer.findViewById(R.id.workspace);
  final Workspace workspace=mWorkspace;
  workspace.setHapticFeedbackEnabled(false);
  DeleteZone deleteZone=(DeleteZone)dragLayer.findViewById(R.id.delete_zone);
  mDeleteZone=deleteZone;
  View handleView=findViewById(R.id.all_apps_button);
  if (handleView != null && handleView instanceof HandleView) {
    mHandleView=(HandleView)handleView;
    mHandleView.setLauncher(this);
    mHandleView.setOnClickListener(this);
    mHandleView.setOnLongClickListener(this);
  }
  if (mCustomizePagedView != null) {
    mCustomizePagedView.setLauncher(this);
    mCustomizePagedView.setDragController(dragController);
  }
 else {
    ImageView hotseatLeft=(ImageView)findViewById(R.id.hotseat_left);
    hotseatLeft.setContentDescription(mHotseatLabels[0]);
    hotseatLeft.setImageDrawable(mHotseatIcons[0]);
    ImageView hotseatRight=(ImageView)findViewById(R.id.hotseat_right);
    hotseatRight.setContentDescription(mHotseatLabels[1]);
    hotseatRight.setImageDrawable(mHotseatIcons[1]);
    mPreviousView=(ImageView)dragLayer.findViewById(R.id.previous_screen);
    mNextView=(ImageView)dragLayer.findViewById(R.id.next_screen);
    Drawable previous=mPreviousView.getDrawable();
    Drawable next=mNextView.getDrawable();
    mWorkspace.setIndicators(previous,next);
    mPreviousView.setHapticFeedbackEnabled(false);
    mPreviousView.setOnLongClickListener(this);
    mNextView.setHapticFeedbackEnabled(false);
    mNextView.setOnLongClickListener(this);
  }
  workspace.setOnLongClickListener(this);
  workspace.setDragController(dragController);
  workspace.setLauncher(this);
  deleteZone.setLauncher(this);
  deleteZone.setDragController(dragController);
  int deleteZoneHandleId;
  final View allAppsButton=findViewById(R.id.all_apps_button);
  final View divider=findViewById(R.id.divider);
  final View configureButton=findViewById(R.id.configure_button);
  if (LauncherApplication.isScreenXLarge()) {
    deleteZone.setOverlappingViews(new View[]{allAppsButton,divider,configureButton});
  }
 else {
    deleteZone.setOverlappingView(findViewById(R.id.all_apps_button_cluster));
  }
  dragController.addDragListener(deleteZone);
  DeleteZone allAppsDeleteZone=(DeleteZone)findViewById(R.id.all_apps_delete_zone);
  if (allAppsDeleteZone != null) {
    allAppsDeleteZone.setLauncher(this);
    allAppsDeleteZone.setDragController(dragController);
    allAppsDeleteZone.setDragAndDropEnabled(false);
    dragController.addDragListener(allAppsDeleteZone);
    dragController.addDropTarget(allAppsDeleteZone);
  }
  ApplicationInfoDropTarget allAppsInfoTarget=(ApplicationInfoDropTarget)findViewById(R.id.all_apps_info_target);
  if (allAppsInfoTarget != null) {
    allAppsInfoTarget.setLauncher(this);
    dragController.addDragListener(allAppsInfoTarget);
    allAppsInfoTarget.setDragAndDropEnabled(false);
    View marketButton=findViewById(R.id.market_button);
    if (marketButton != null) {
      allAppsInfoTarget.setOverlappingView(marketButton);
    }
  }
  dragController.setDragScoller(workspace);
  dragController.setScrollView(dragLayer);
  dragController.setMoveTarget(workspace);
  dragController.addDropTarget(workspace);
  dragController.addDropTarget(deleteZone);
  if (allAppsInfoTarget != null) {
    dragController.addDropTarget(allAppsInfoTarget);
  }
  if (allAppsDeleteZone != null) {
    dragController.addDropTarget(allAppsDeleteZone);
  }
}

{
  long startTime=0;
  if (DEBUG_RESUME_TIME) {
    startTime=System.currentTimeMillis();
  }
  super.onResume();
  if (mOnResumeState == State.WORKSPACE) {
    showWorkspace(false);
  }
 else   if (mOnResumeState == State.APPS_CUSTOMIZE) {
    showAllApps(false);
  }
  mOnResumeState=State.NONE;
  setWorkspaceBackground(mState == State.WORKSPACE);
  InstallShortcutReceiver.flushInstallQueue(this);
  mPaused=false;
  sPausedFromUserAction=false;
  if (mRestoring || mOnResumeNeedsLoad) {
    mWorkspaceLoading=true;
    mModel.startLoader(true,-1);
    mRestoring=false;
    mOnResumeNeedsLoad=false;
  }
  long startTimeCallbacks=0;
  if (DEBUG_RESUME_TIME) {
    startTimeCallbacks=System.currentTimeMillis();
  }
  for (int i=0; i < mOnResumeCallbacks.size(); i++) {
    mOnResumeCallbacks.get(i).run();
  }
  mOnResumeCallbacks.clear();
  if (DEBUG_RESUME_TIME) {
    Log.d(TAG,"Time spent processing callbacks in onResume: " + (System.currentTimeMillis() - startTimeCallbacks));
  }
  if (mWaitingForResume != null) {
    mWaitingForResume.setStayPressed(false);
  }
  if (mAppsCustomizeContent != null) {
    mAppsCustomizeContent.resetDrawableState();
  }
  getWorkspace().reinflateWidgetsIfNecessary();
  updateGlobalIcons();
  if (DEBUG_RESUME_TIME) {
    Log.d(TAG,"Time spent in onResume: " + (System.currentTimeMillis() - startTime));
  }
}

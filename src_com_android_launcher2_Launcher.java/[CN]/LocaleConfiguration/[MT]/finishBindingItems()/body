{
  setLoadOnResume();
  if (mSavedState != null) {
    if (!mWorkspace.hasFocus()) {
      mWorkspace.getChildAt(mWorkspace.getCurrentPage()).requestFocus();
    }
    final long[] folders=mSavedState.getLongArray(RUNTIME_STATE_FOLDERS);
    if (folders != null) {
      for (      long folderId : folders) {
        final FolderInfo info=sFolders.get(folderId);
        if (info != null) {
          openFolder(info);
        }
      }
      final Folder openFolder=mWorkspace.getOpenFolder();
      if (openFolder != null) {
        openFolder.requestFocus();
      }
    }
    mSavedState=null;
  }
  if (mSavedInstanceState != null) {
    super.onRestoreInstanceState(mSavedInstanceState);
    mSavedInstanceState=null;
  }
  if (LauncherApplication.isScreenXLarge() && (mState == State.CUSTOMIZE)) {
    final int childCount=mWorkspace.getChildCount();
    for (int i=0; i < childCount; ++i) {
      mWorkspace.getChildAt(i).requestLayout();
    }
  }
  mWorkspaceLoading=false;
  for (int i=0; i < sPendingAddList.size(); i++) {
    completeAdd(sPendingAddList.get(i));
  }
  sPendingAddList.clear();
}

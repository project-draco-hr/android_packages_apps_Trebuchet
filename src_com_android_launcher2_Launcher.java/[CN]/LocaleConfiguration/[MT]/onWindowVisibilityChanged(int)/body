{
  mVisible=visibility == View.VISIBLE;
  updateRunning();
  if (mVisible) {
    mAppsCustomizeTabHost.onWindowVisible();
    if (!mWorkspaceLoading) {
      final ViewTreeObserver observer=mWorkspace.getViewTreeObserver();
      observer.addOnDrawListener(new ViewTreeObserver.OnDrawListener(){
        private boolean mStarted=false;
        public void onDraw(){
          if (mStarted)           return;
          mStarted=true;
          mWorkspace.postDelayed(mBuildLayersRunnable,500);
          final ViewTreeObserver.OnDrawListener listener=this;
          mWorkspace.post(new Runnable(){
            public void run(){
              mWorkspace.getViewTreeObserver().removeOnDrawListener(listener);
            }
          }
);
          return;
        }
      }
);
    }
    updateAppMarketIcon();
    clearTypedText();
  }
}

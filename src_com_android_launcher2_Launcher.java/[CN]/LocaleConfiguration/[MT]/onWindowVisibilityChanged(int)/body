{
  mVisible=visibility == View.VISIBLE;
  updateRunning();
  if (mVisible) {
    mAppsCustomizeTabHost.onWindowVisible();
    if (!mWorkspaceLoading) {
      final ViewTreeObserver observer=mWorkspace.getViewTreeObserver();
      observer.addOnPreDrawListener(new ViewTreeObserver.OnPreDrawListener(){
        public boolean onPreDraw(){
          workspace.postDelayed(mBuildLayersRunnable,500);
          observer.removeOnPreDrawListener(this);
          return true;
        }
      }
);
    }
    updateAppMarketIcon();
    clearTypedText();
  }
}

{
  resetAddInfo();
  mPendingAddInfo.container=info.container=container;
  mPendingAddInfo.screen=info.screen=screen;
  mPendingAddInfo.dropPos=loc;
  mPendingAddInfo.minSpanX=info.minSpanX;
  mPendingAddInfo.minSpanY=info.minSpanY;
  if (cell != null) {
    mPendingAddInfo.cellX=cell[0];
    mPendingAddInfo.cellY=cell[1];
  }
  if (span != null) {
    mPendingAddInfo.spanX=span[0];
    mPendingAddInfo.spanY=span[1];
  }
  AppWidgetHostView hostView=info.boundWidget;
  int appWidgetId;
  if (hostView != null) {
    appWidgetId=hostView.getAppWidgetId();
    addAppWidgetImpl(appWidgetId,info);
  }
 else {
    appWidgetId=getAppWidgetHost().allocateAppWidgetId();
    mWidgetBeingBoundOrConfigured=info;
    if (mAppWidgetManager.bindAppWidgetIdIfAllowed(appWidgetId,info.componentName)) {
      addAppWidgetImpl(appWidgetId,info);
    }
 else {
      Intent intent=new Intent(AppWidgetManager.ACTION_APPWIDGET_BIND);
      intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_ID,appWidgetId);
      intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_PROVIDER,info.componentName);
      startActivityForResult(intent,REQUEST_BIND_APPWIDGET);
    }
  }
}

{
  if (LauncherApplication.isScreenXLarge()) {
    PackageManager packageManager=getPackageManager();
    Intent intent=new Intent(Intent.ACTION_MAIN).addCategory(Intent.CATEGORY_APP_MARKET);
    ComponentName activityName=intent.resolveActivity(getPackageManager());
    if (activityName != null) {
      mAppMarketIntent=intent;
      ImageView marketButton=(ImageView)findViewById(R.id.market_button);
      Drawable toolbarIcon=null;
      try {
        Bundle metaData=packageManager.getActivityInfo(activityName,PackageManager.GET_META_DATA).metaData;
        if (metaData != null) {
          int iconResId=metaData.getInt(TOOLBAR_ICON_METADATA_NAME);
          if (iconResId != 0) {
            Resources res=packageManager.getResourcesForActivity(activityName);
            toolbarIcon=res.getDrawable(iconResId);
          }
        }
      }
 catch (      NameNotFoundException e) {
      }
      if (toolbarIcon == null) {
        marketButton.setImageResource(R.drawable.app_market_generic);
      }
 else {
        marketButton.setImageDrawable(toolbarIcon);
      }
    }
 else {
      mAppMarketIntent=null;
    }
  }
}

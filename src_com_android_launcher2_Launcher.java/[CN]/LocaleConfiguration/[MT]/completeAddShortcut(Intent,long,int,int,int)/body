{
  int[] cellXY=mTmpAddItemCellCoordinates;
  int[] touchXY=mPendingAddInfo.dropPos;
  CellLayout layout=getCellLayout(container,screen);
  boolean foundCellSpan=false;
  ShortcutInfo info=mModel.infoFromShortcutIntent(this,data,null);
  if (info == null) {
    return;
  }
  final View view=createShortcut(info);
  if (cellX >= 0 && cellY >= 0) {
    cellXY[0]=cellX;
    cellXY[1]=cellY;
    foundCellSpan=true;
    if (mWorkspace.createUserFolderIfNecessary(view,container,layout,cellXY,true,null,null)) {
      return;
    }
    DragObject dragObject=new DragObject();
    dragObject.dragInfo=info;
    if (mWorkspace.addToExistingFolderIfNecessary(view,layout,cellXY,dragObject,true)) {
      return;
    }
  }
 else   if (touchXY != null) {
    int[] result=layout.findNearestVacantArea(touchXY[0],touchXY[1],1,1,cellXY);
    foundCellSpan=(result != null);
  }
 else {
    foundCellSpan=layout.findCellForSpan(cellXY,1,1);
  }
  if (!foundCellSpan) {
    showOutOfSpaceMessage();
    return;
  }
  LauncherModel.addItemToDatabase(this,info,container,screen,cellXY[0],cellXY[1],false);
  if (!mRestoring) {
    mWorkspace.addInScreen(view,container,screen,cellXY[0],cellXY[1],1,1,isWorkspaceLocked());
  }
}

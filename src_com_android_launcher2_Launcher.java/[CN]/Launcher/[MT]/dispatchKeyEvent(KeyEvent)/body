{
  if (event.getAction() == KeyEvent.ACTION_DOWN) {
switch (event.getKeyCode()) {
case KeyEvent.KEYCODE_BACK:
      return true;
case KeyEvent.KEYCODE_HOME:
    return true;
}
}
 else if (event.getAction() == KeyEvent.ACTION_UP) {
switch (event.getKeyCode()) {
case KeyEvent.KEYCODE_BACK:
  if (!event.isCanceled()) {
    mWorkspace.dispatchKeyEvent(event);
    if (isAllAppsVisible()) {
      closeAllApps(true);
    }
 else {
      closeFolder();
    }
    dismissPreview(mPreviousView);
    dismissPreview(mNextView);
  }
return true;
case KeyEvent.KEYCODE_HOME:
return true;
}
}
return super.dispatchKeyEvent(event);
}

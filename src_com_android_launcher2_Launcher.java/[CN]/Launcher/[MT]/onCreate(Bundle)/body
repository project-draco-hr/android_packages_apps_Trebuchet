{
  super.onCreate(savedInstanceState);
  if (LauncherApplication.isInPlaceRotationEnabled()) {
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,WindowManager.LayoutParams.FLAG_FULLSCREEN);
    this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_SENSOR);
  }
  LauncherApplication app=((LauncherApplication)getApplication());
  mModel=app.setLauncher(this);
  mIconCache=app.getIconCache();
  mDragController=new DragController(this);
  mInflater=getLayoutInflater();
  mAppWidgetManager=AppWidgetManager.getInstance(this);
  mAppWidgetHost=new LauncherAppWidgetHost(this,APPWIDGET_HOST_ID);
  mAppWidgetHost.startListening();
  if (PROFILE_STARTUP) {
    android.os.Debug.startMethodTracing("/sdcard/launcher");
  }
  loadHotseats();
  checkForLocaleChange();
  setWallpaperDimension();
  setContentView(R.layout.launcher);
  mHomeCustomizationDrawer=getTabHost();
  String widgetsLabel=getString(R.string.widgets_tab_label);
  mHomeCustomizationDrawer.addTab(mHomeCustomizationDrawer.newTabSpec("widgets").setIndicator(widgetsLabel).setContent(R.id.widget_chooser));
  String foldersLabel=getString(R.string.folders_tab_label);
  mHomeCustomizationDrawer.addTab(mHomeCustomizationDrawer.newTabSpec("folders").setIndicator(foldersLabel).setContent(R.id.folder_chooser));
  String shortcutsLabel=getString(R.string.shortcuts_tab_label);
  mHomeCustomizationDrawer.addTab(mHomeCustomizationDrawer.newTabSpec("shortcuts").setIndicator(shortcutsLabel).setContent(R.id.shortcut_chooser));
  String wallpapersLabel=getString(R.string.wallpapers_tab_label);
  mHomeCustomizationDrawer.addTab(mHomeCustomizationDrawer.newTabSpec("wallpapers").setIndicator(wallpapersLabel).setContent(R.id.wallpaperstab));
  mHomeCustomizationDrawer.setCurrentTab(0);
  setupViews();
  registerContentObservers();
  lockAllApps();
  mSavedState=savedInstanceState;
  restoreState(mSavedState);
  if (PROFILE_STARTUP) {
    android.os.Debug.stopMethodTracing();
  }
  if (!mRestoring) {
    mModel.startLoader(this,true);
  }
  mDefaultKeySsb=new SpannableStringBuilder();
  Selection.setSelection(mDefaultKeySsb,0);
  IntentFilter filter=new IntentFilter(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
  registerReceiver(mCloseSystemDialogsReceiver,filter);
}

{
  boolean isVisible=true;
  boolean useUninstallLabel=isAllAppsApplication(source,info);
  boolean useDeleteLabel=!useUninstallLabel && source.supportsDeleteDropTarget();
  if (!willAcceptDrop(info) || isAllAppsWidget(source,info)) {
    isVisible=false;
  }
  if (useUninstallLabel) {
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.JELLY_BEAN_MR2) {
      UserManager userManager=(UserManager)getContext().getSystemService(Context.USER_SERVICE);
      Bundle restrictions=userManager.getUserRestrictions();
      if (restrictions.getBoolean(UserManager.DISALLOW_APPS_CONTROL,false) || restrictions.getBoolean(UserManager.DISALLOW_UNINSTALL_APPS,false)) {
        isVisible=false;
      }
    }
  }
  if (useUninstallLabel) {
    setCompoundDrawablesRelativeWithIntrinsicBounds(mUninstallDrawable,null,null,null);
  }
 else   if (useDeleteLabel) {
    setCompoundDrawablesRelativeWithIntrinsicBounds(mRemoveDrawable,null,null,null);
  }
 else {
    isVisible=false;
  }
  mCurrentDrawable=(TransitionDrawable)getCurrentDrawable();
  mActive=isVisible;
  resetHoverColor();
  ((ViewGroup)getParent()).setVisibility(isVisible ? View.VISIBLE : View.GONE);
  if (isVisible && getText().length() > 0) {
    setText(useUninstallLabel ? R.string.delete_target_uninstall_label : R.string.delete_target_label);
  }
}

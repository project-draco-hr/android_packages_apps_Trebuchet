{
  final List<ResolveInfo> matches=findActivitiesForPackage(context,packageName);
  if (matches.size() > 0) {
    for (int i=data.size() - 1; i >= 0; i--) {
      final ApplicationInfo applicationInfo=data.get(i);
      final ComponentName component=applicationInfo.intent.getComponent();
      if (packageName.equals(component.getPackageName())) {
        if (!findActivity(matches,component)) {
          removed.add(applicationInfo);
          AppInfoCache.remove(component);
          data.remove(i);
        }
      }
    }
    Utilities.BubbleText bubble=new Utilities.BubbleText(context);
    int count=matches.size();
    for (int i=0; i < count; i++) {
      final ResolveInfo info=matches.get(i);
      ApplicationInfo applicationInfo=findApplicationInfoLocked(info.activityInfo.applicationInfo.packageName,info.activityInfo.name);
      if (applicationInfo == null) {
        applicationInfo=AppInfoCache.cache(info,context,bubble);
        data.add(applicationInfo);
        added.add(applicationInfo);
      }
 else {
        AppInfoCache.update(info,applicationInfo,context);
        modified.add(applicationInfo);
      }
    }
  }
}
